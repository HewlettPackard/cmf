
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="CMF - Common Metadata Framework">
      
      
        <meta name="author" content="AI Research & Development Lab (Hewlett-Packard Labs)">
      
      
      
        <link rel="prev" href="../../../cmf_client/tensorflow_guide/">
      
      
        <link rel="next" href="../dataslice/">
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.39">
    
    
      
        <title>CMF - CMF</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.8c3ca2c6.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../../extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#cmflibcmf" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="CMF" class="md-header__button md-logo" aria-label="CMF" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            CMF
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              CMF
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/HewlettPackard/cmf" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    HewlettPackard/cmf
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="CMF" class="md-nav__button md-logo" aria-label="CMF" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    CMF
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/HewlettPackard/cmf" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    HewlettPackard/cmf
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CMF in a nutshell
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../cmf_client/step-by-step/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Quick start with cmf-client
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Examples
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Examples
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../examples/getting_started/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting Started
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Architecture
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Architecture
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../architecture/overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../architecture/components/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Components
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../architecture/advantages/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Advantages
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Client
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Client
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../cmf_client/cmf_client/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../cmf_client/step-by-step/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Quick start with cmf-client
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../cmf_client/minio-server/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    dvc minio backend
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Server
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Server
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../cmf_server/cmf-server/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting started with cmf-server
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    TensorBoard
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            TensorBoard
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../cmf_client/tensorflow_guide/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting started with tensorboard
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" checked>
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Public API
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            Public API
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    CMF
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    CMF
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#cmflib.cmf.Cmf.create_context" class="md-nav__link">
    <span class="md-ellipsis">
      create_context
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cmflib.cmf.Cmf.merge_created_context" class="md-nav__link">
    <span class="md-ellipsis">
      merge_created_context
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cmflib.cmf.Cmf.create_execution" class="md-nav__link">
    <span class="md-ellipsis">
      create_execution
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cmflib.cmf.Cmf.update_execution" class="md-nav__link">
    <span class="md-ellipsis">
      update_execution
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cmflib.cmf.Cmf.log_dataset" class="md-nav__link">
    <span class="md-ellipsis">
      log_dataset
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cmflib.cmf.Cmf.log_dataset_with_version" class="md-nav__link">
    <span class="md-ellipsis">
      log_dataset_with_version
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cmflib.cmf.Cmf.log_model" class="md-nav__link">
    <span class="md-ellipsis">
      log_model
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cmflib.cmf.Cmf.log_model_with_version" class="md-nav__link">
    <span class="md-ellipsis">
      log_model_with_version
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cmflib.cmf.Cmf.log_execution_metrics_from_client" class="md-nav__link">
    <span class="md-ellipsis">
      log_execution_metrics_from_client
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cmflib.cmf.Cmf.log_execution_metrics" class="md-nav__link">
    <span class="md-ellipsis">
      log_execution_metrics
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cmflib.cmf.Cmf.log_metric" class="md-nav__link">
    <span class="md-ellipsis">
      log_metric
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cmflib.cmf.Cmf.commit_existing_metrics" class="md-nav__link">
    <span class="md-ellipsis">
      commit_existing_metrics
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cmflib.cmf.Cmf.create_dataslice" class="md-nav__link">
    <span class="md-ellipsis">
      create_dataslice
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cmflib.cmf.Cmf.update_dataslice" class="md-nav__link">
    <span class="md-ellipsis">
      update_dataslice
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cmflib.cmf.cmf_init_show" class="md-nav__link">
    <span class="md-ellipsis">
      cmf_init_show
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cmflib.cmf.cmf_init" class="md-nav__link">
    <span class="md-ellipsis">
      cmf_init
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cmflib.cmf.metadata_push" class="md-nav__link">
    <span class="md-ellipsis">
      metadata_push
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cmflib.cmf.metadata_pull" class="md-nav__link">
    <span class="md-ellipsis">
      metadata_pull
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cmflib.cmf.artifact_pull" class="md-nav__link">
    <span class="md-ellipsis">
      artifact_pull
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cmflib.cmf.artifact_pull_single" class="md-nav__link">
    <span class="md-ellipsis">
      artifact_pull_single
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cmflib.cmf.artifact_push" class="md-nav__link">
    <span class="md-ellipsis">
      artifact_push
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../dataslice/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    DataSlice
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cmfquery/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CmfQuery
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Ontology
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            Ontology
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../common-metadata-ontology/readme/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Ontology
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#cmflib.cmf.Cmf.create_context" class="md-nav__link">
    <span class="md-ellipsis">
      create_context
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cmflib.cmf.Cmf.merge_created_context" class="md-nav__link">
    <span class="md-ellipsis">
      merge_created_context
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cmflib.cmf.Cmf.create_execution" class="md-nav__link">
    <span class="md-ellipsis">
      create_execution
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cmflib.cmf.Cmf.update_execution" class="md-nav__link">
    <span class="md-ellipsis">
      update_execution
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cmflib.cmf.Cmf.log_dataset" class="md-nav__link">
    <span class="md-ellipsis">
      log_dataset
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cmflib.cmf.Cmf.log_dataset_with_version" class="md-nav__link">
    <span class="md-ellipsis">
      log_dataset_with_version
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cmflib.cmf.Cmf.log_model" class="md-nav__link">
    <span class="md-ellipsis">
      log_model
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cmflib.cmf.Cmf.log_model_with_version" class="md-nav__link">
    <span class="md-ellipsis">
      log_model_with_version
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cmflib.cmf.Cmf.log_execution_metrics_from_client" class="md-nav__link">
    <span class="md-ellipsis">
      log_execution_metrics_from_client
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cmflib.cmf.Cmf.log_execution_metrics" class="md-nav__link">
    <span class="md-ellipsis">
      log_execution_metrics
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cmflib.cmf.Cmf.log_metric" class="md-nav__link">
    <span class="md-ellipsis">
      log_metric
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cmflib.cmf.Cmf.commit_existing_metrics" class="md-nav__link">
    <span class="md-ellipsis">
      commit_existing_metrics
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cmflib.cmf.Cmf.create_dataslice" class="md-nav__link">
    <span class="md-ellipsis">
      create_dataslice
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cmflib.cmf.Cmf.update_dataslice" class="md-nav__link">
    <span class="md-ellipsis">
      update_dataslice
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cmflib.cmf.cmf_init_show" class="md-nav__link">
    <span class="md-ellipsis">
      cmf_init_show
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cmflib.cmf.cmf_init" class="md-nav__link">
    <span class="md-ellipsis">
      cmf_init
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cmflib.cmf.metadata_push" class="md-nav__link">
    <span class="md-ellipsis">
      metadata_push
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cmflib.cmf.metadata_pull" class="md-nav__link">
    <span class="md-ellipsis">
      metadata_pull
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cmflib.cmf.artifact_pull" class="md-nav__link">
    <span class="md-ellipsis">
      artifact_pull
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cmflib.cmf.artifact_pull_single" class="md-nav__link">
    <span class="md-ellipsis">
      artifact_pull_single
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cmflib.cmf.artifact_push" class="md-nav__link">
    <span class="md-ellipsis">
      artifact_push
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="cmflibcmf">cmflib.cmf<a class="headerlink" href="#cmflibcmf" title="Permanent link">&para;</a></h1>


<div class="doc doc-object doc-class">




    <div class="doc doc-contents first">


        <p>This class provides methods to log metadata for distributed AI pipelines.
The class instance creates an ML metadata store to store the metadata.
It creates a driver to store nodes and its relationships to neo4j.
The user has to provide the name of the pipeline, that needs to be recorded with CMF.
<div class="highlight"><pre><span></span><code><span class="n">cmflib</span><span class="o">.</span><span class="n">cmf</span><span class="o">.</span><span class="n">Cmf</span><span class="p">(</span>
    <span class="n">filepath</span><span class="o">=</span><span class="s2">&quot;mlmd&quot;</span><span class="p">,</span>
    <span class="n">pipeline_name</span><span class="o">=</span><span class="s2">&quot;test_pipeline&quot;</span><span class="p">,</span>
    <span class="n">custom_properties</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;owner&quot;</span><span class="p">:</span> <span class="s2">&quot;user_a&quot;</span><span class="p">},</span>
    <span class="n">graph</span><span class="o">=</span><span class="kc">False</span>
<span class="p">)</span>
</code></pre></div>
Args:
    filepath: Path  to the sqlite file to store the metadata
    pipeline_name: Name to uniquely identify the pipeline.
    Note that name is the unique identifier for a pipeline.
    If a pipeline already exist with the same name, the existing pipeline object is reused.
    custom_properties: Additional properties of the pipeline that needs to be stored.
    graph: If set to true, the libray also stores the relationships in the provided graph database.
    The following
    variables should be set: <code>neo4j_uri</code> (graph server URI), <code>neo4j_user</code> (user name) and
    <code>neo4j_password</code> (user password), e.g.:
    <div class="highlight"><pre><span></span><code>cmf init local --path /home/user/local-storage --git-remote-url https://github.com/XXX/exprepo.git --neo4j-user neo4j --neo4j-password neo4j
                      --neo4j-uri bolt://localhost:7687
</code></pre></div></p>

                  <details class="quote">
                    <summary>Source code in <code>cmflib/cmf.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span></pre></div></td><td class="code"><div><pre><span></span><code>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">filepath</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;mlmd&quot;</span><span class="p">,</span>
        <span class="n">pipeline_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="n">custom_properties</span><span class="p">:</span> <span class="n">t</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">t</span><span class="o">.</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">graph</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">is_server</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="c1">#path to directory</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cmf_init_path</span> <span class="o">=</span> <span class="n">filepath</span><span class="o">.</span><span class="n">rsplit</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> \
				 <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">filepath</span><span class="o">.</span><span class="n">rsplit</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span> <span class="o">&gt;</span> <span class="mi">1</span> \
					<span class="k">else</span>  <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>

        <span class="n">logging_dir</span> <span class="o">=</span> <span class="n">change_dir</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cmf_init_path</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">is_server</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
            <span class="n">Cmf</span><span class="o">.</span><span class="n">__prechecks</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">custom_properties</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">custom_properties</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">pipeline_name</span><span class="p">:</span>
            <span class="c1"># assign folder name as pipeline name </span>
            <span class="n">cur_folder</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">())</span>
            <span class="n">pipeline_name</span> <span class="o">=</span> <span class="n">cur_folder</span>
        <span class="n">config</span> <span class="o">=</span> <span class="n">mlpb</span><span class="o">.</span><span class="n">ConnectionConfig</span><span class="p">()</span>
        <span class="n">config</span><span class="o">.</span><span class="n">sqlite</span><span class="o">.</span><span class="n">filename_uri</span> <span class="o">=</span> <span class="n">filepath</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">store</span> <span class="o">=</span> <span class="n">metadata_store</span><span class="o">.</span><span class="n">MetadataStore</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">filepath</span> <span class="o">=</span> <span class="n">filepath</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">child_context</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">execution</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">execution_name</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">execution_command</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">metrics</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">input_artifacts</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">execution_label_props</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">graph</span> <span class="o">=</span> <span class="n">graph</span>
        <span class="c1">#last token in filepath</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">branch_name</span> <span class="o">=</span> <span class="n">filepath</span><span class="o">.</span><span class="n">rsplit</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">is_server</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
            <span class="n">git_checkout_new_branch</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">branch_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parent_context</span> <span class="o">=</span> <span class="n">get_or_create_parent_context</span><span class="p">(</span>
            <span class="n">store</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="p">,</span>
            <span class="n">pipeline</span><span class="o">=</span><span class="n">pipeline_name</span><span class="p">,</span>
            <span class="n">custom_properties</span><span class="o">=</span><span class="n">custom_properties</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">is_server</span><span class="p">:</span>
            <span class="n">Cmf</span><span class="o">.</span><span class="n">__get_neo4j_server_config</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">graph</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">Cmf</span><span class="o">.</span><span class="n">__load_neo4j_params</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">driver</span> <span class="o">=</span> <span class="n">graph_wrapper</span><span class="o">.</span><span class="n">GraphDriver</span><span class="p">(</span>
                <span class="n">Cmf</span><span class="o">.</span><span class="n">__neo4j_uri</span><span class="p">,</span> <span class="n">Cmf</span><span class="o">.</span><span class="n">__neo4j_user</span><span class="p">,</span> <span class="n">Cmf</span><span class="o">.</span><span class="n">__neo4j_password</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">create_pipeline_node</span><span class="p">(</span>
                <span class="n">pipeline_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent_context</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">custom_properties</span>
            <span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">logging_dir</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h2 id="cmflib.cmf.Cmf.create_context" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">create_context</span><span class="p">(</span><span class="n">pipeline_stage</span><span class="p">,</span> <span class="n">custom_properties</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#cmflib.cmf.Cmf.create_context" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Create's a  context(stage).
Every call creates a unique pipeline stage.
Updates Pipeline_stage name.
Example:
    <div class="highlight"><pre><span></span><code><span class="c1">#Create context</span>
<span class="c1"># Import CMF</span>
<span class="kn">from</span> <span class="nn">cmflib.cmf</span> <span class="kn">import</span> <span class="n">Cmf</span>
<span class="kn">from</span> <span class="nn">ml_metadata.proto</span> <span class="kn">import</span> <span class="n">metadata_store_pb2</span> <span class="k">as</span> <span class="n">mlpb</span>
<span class="c1"># Create CMF logger</span>
<span class="n">cmf</span> <span class="o">=</span> <span class="n">Cmf</span><span class="p">(</span><span class="n">filepath</span><span class="o">=</span><span class="s2">&quot;mlmd&quot;</span><span class="p">,</span> <span class="n">pipeline_name</span><span class="o">=</span><span class="s2">&quot;test_pipeline&quot;</span><span class="p">)</span>
<span class="c1"># Create context</span>
<span class="n">context</span><span class="p">:</span> <span class="n">mlmd</span><span class="o">.</span><span class="n">proto</span><span class="o">.</span><span class="n">Context</span> <span class="o">=</span> <span class="n">cmf</span><span class="o">.</span><span class="n">create_context</span><span class="p">(</span>
    <span class="n">pipeline_stage</span><span class="o">=</span><span class="s2">&quot;prepare&quot;</span><span class="p">,</span>
    <span class="n">custom_properties</span> <span class="o">=</span><span class="p">{</span><span class="s2">&quot;user-metadata1&quot;</span><span class="p">:</span> <span class="s2">&quot;metadata_value&quot;</span><span class="p">}</span>
<span class="p">)</span>
</code></pre></div>
    Args:
        Pipeline_stage: Name of the Stage.
        custom_properties: Developers can provide key value pairs with additional properties of the execution that
            need to be stored.
    Returns:
        Context object from ML Metadata library associated with the new context for this stage.</p>

            <details class="quote">
              <summary>Source code in <code>cmflib/cmf.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">create_context</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">pipeline_stage</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">custom_properties</span><span class="p">:</span> <span class="n">t</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">t</span><span class="o">.</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">mlpb</span><span class="o">.</span><span class="n">Context</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create&#39;s a  context(stage).</span>
<span class="sd">    Every call creates a unique pipeline stage.</span>
<span class="sd">    Updates Pipeline_stage name.</span>
<span class="sd">    Example:</span>
<span class="sd">        ```python</span>
<span class="sd">        #Create context</span>
<span class="sd">        # Import CMF</span>
<span class="sd">        from cmflib.cmf import Cmf</span>
<span class="sd">        from ml_metadata.proto import metadata_store_pb2 as mlpb</span>
<span class="sd">        # Create CMF logger</span>
<span class="sd">        cmf = Cmf(filepath=&quot;mlmd&quot;, pipeline_name=&quot;test_pipeline&quot;)</span>
<span class="sd">        # Create context</span>
<span class="sd">        context: mlmd.proto.Context = cmf.create_context(</span>
<span class="sd">            pipeline_stage=&quot;prepare&quot;,</span>
<span class="sd">            custom_properties ={&quot;user-metadata1&quot;: &quot;metadata_value&quot;}</span>
<span class="sd">        )</span>

<span class="sd">        ```</span>
<span class="sd">        Args:</span>
<span class="sd">            Pipeline_stage: Name of the Stage.</span>
<span class="sd">            custom_properties: Developers can provide key value pairs with additional properties of the execution that</span>
<span class="sd">                need to be stored.</span>
<span class="sd">        Returns:</span>
<span class="sd">            Context object from ML Metadata library associated with the new context for this stage.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">custom_props</span> <span class="o">=</span> <span class="p">{}</span> <span class="k">if</span> <span class="n">custom_properties</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">custom_properties</span>
    <span class="n">pipeline_stage</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent_context</span><span class="o">.</span><span class="n">name</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="n">pipeline_stage</span>
    <span class="n">ctx</span> <span class="o">=</span> <span class="n">get_or_create_run_context</span><span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="p">,</span> <span class="n">pipeline_stage</span><span class="p">,</span> <span class="n">custom_props</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">child_context</span> <span class="o">=</span> <span class="n">ctx</span>
    <span class="n">associate_child_to_parent_context</span><span class="p">(</span>
        <span class="n">store</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="p">,</span> <span class="n">parent_context</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">parent_context</span><span class="p">,</span> <span class="n">child_context</span><span class="o">=</span><span class="n">ctx</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">create_stage_node</span><span class="p">(</span>
            <span class="n">pipeline_stage</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent_context</span><span class="p">,</span> <span class="n">ctx</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">custom_props</span>
        <span class="p">)</span>
    <span class="k">return</span> <span class="n">ctx</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="cmflib.cmf.Cmf.merge_created_context" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">merge_created_context</span><span class="p">(</span><span class="n">pipeline_stage</span><span class="p">,</span> <span class="n">custom_properties</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#cmflib.cmf.Cmf.merge_created_context" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Merge created context.
Every call creates a unique pipeline stage.
Created for metadata push purpose.
Example:</p>
<pre><code>```python
#Create context
# Import CMF
from cmflib.cmf import Cmf
from ml_metadata.proto import metadata_store_pb2 as mlpb
# Create CMF logger
cmf = Cmf(filepath="mlmd", pipeline_name="test_pipeline")
# Create context
context: mlmd.proto.Context = cmf.merge_created_context(
    pipeline_stage="Test-env/prepare",
    custom_properties ={"user-metadata1": "metadata_value"}
```
Args:
    Pipeline_stage: Pipeline_Name/Stage_name.
    custom_properties: Developers can provide key value pairs with additional properties of the execution that
        need to be stored.
Returns:
    Context object from ML Metadata library associated with the new context for this stage.
</code></pre>

            <details class="quote">
              <summary>Source code in <code>cmflib/cmf.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">merge_created_context</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">pipeline_stage</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">custom_properties</span><span class="p">:</span> <span class="n">t</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">t</span><span class="o">.</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">mlpb</span><span class="o">.</span><span class="n">Context</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Merge created context.</span>
<span class="sd">    Every call creates a unique pipeline stage.</span>
<span class="sd">    Created for metadata push purpose.</span>
<span class="sd">    Example:</span>

<span class="sd">        ```python</span>
<span class="sd">        #Create context</span>
<span class="sd">        # Import CMF</span>
<span class="sd">        from cmflib.cmf import Cmf</span>
<span class="sd">        from ml_metadata.proto import metadata_store_pb2 as mlpb</span>
<span class="sd">        # Create CMF logger</span>
<span class="sd">        cmf = Cmf(filepath=&quot;mlmd&quot;, pipeline_name=&quot;test_pipeline&quot;)</span>
<span class="sd">        # Create context</span>
<span class="sd">        context: mlmd.proto.Context = cmf.merge_created_context(</span>
<span class="sd">            pipeline_stage=&quot;Test-env/prepare&quot;,</span>
<span class="sd">            custom_properties ={&quot;user-metadata1&quot;: &quot;metadata_value&quot;}</span>
<span class="sd">        ```</span>
<span class="sd">        Args:</span>
<span class="sd">            Pipeline_stage: Pipeline_Name/Stage_name.</span>
<span class="sd">            custom_properties: Developers can provide key value pairs with additional properties of the execution that</span>
<span class="sd">                need to be stored.</span>
<span class="sd">        Returns:</span>
<span class="sd">            Context object from ML Metadata library associated with the new context for this stage.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">custom_props</span> <span class="o">=</span> <span class="p">{}</span> <span class="k">if</span> <span class="n">custom_properties</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">custom_properties</span>
    <span class="n">ctx</span> <span class="o">=</span> <span class="n">get_or_create_run_context</span><span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="p">,</span> <span class="n">pipeline_stage</span><span class="p">,</span> <span class="n">custom_props</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">child_context</span> <span class="o">=</span> <span class="n">ctx</span>
    <span class="n">associate_child_to_parent_context</span><span class="p">(</span>
        <span class="n">store</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="p">,</span> <span class="n">parent_context</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">parent_context</span><span class="p">,</span> <span class="n">child_context</span><span class="o">=</span><span class="n">ctx</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">create_stage_node</span><span class="p">(</span>
            <span class="n">pipeline_stage</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent_context</span><span class="p">,</span> <span class="n">ctx</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">custom_props</span>
        <span class="p">)</span>
    <span class="k">return</span> <span class="n">ctx</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="cmflib.cmf.Cmf.create_execution" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">create_execution</span><span class="p">(</span><span class="n">execution_type</span><span class="p">,</span> <span class="n">custom_properties</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">cmd</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">create_new_execution</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

<a href="#cmflib.cmf.Cmf.create_execution" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Create execution.
Every call creates a unique execution. Execution can only be created within a context, so
<a class="autorefs autorefs-internal" href="#cmflib.cmf.Cmf.create_context">create_context</a> must be called first.
Example:
    <div class="highlight"><pre><span></span><code><span class="c1"># Import CMF</span>
<span class="kn">from</span> <span class="nn">cmflib.cmf</span> <span class="kn">import</span> <span class="n">Cmf</span>
<span class="kn">from</span> <span class="nn">ml_metadata.proto</span> <span class="kn">import</span> <span class="n">metadata_store_pb2</span> <span class="k">as</span> <span class="n">mlpb</span>
<span class="c1"># Create CMF logger</span>
<span class="n">cmf</span> <span class="o">=</span> <span class="n">Cmf</span><span class="p">(</span><span class="n">filepath</span><span class="o">=</span><span class="s2">&quot;mlmd&quot;</span><span class="p">,</span> <span class="n">pipeline_name</span><span class="o">=</span><span class="s2">&quot;test_pipeline&quot;</span><span class="p">)</span>
<span class="c1"># Create or reuse context for this stage</span>
<span class="n">context</span><span class="p">:</span> <span class="n">mlmd</span><span class="o">.</span><span class="n">proto</span><span class="o">.</span><span class="n">Context</span> <span class="o">=</span> <span class="n">cmf</span><span class="o">.</span><span class="n">create_context</span><span class="p">(</span>
    <span class="n">pipeline_stage</span><span class="o">=</span><span class="s2">&quot;prepare&quot;</span><span class="p">,</span>
    <span class="n">custom_properties</span> <span class="o">=</span><span class="p">{</span><span class="s2">&quot;user-metadata1&quot;</span><span class="p">:</span> <span class="s2">&quot;metadata_value&quot;</span><span class="p">}</span>
<span class="p">)</span>
<span class="c1"># Create a new execution for this stage run</span>
<span class="n">execution</span><span class="p">:</span> <span class="n">mlmd</span><span class="o">.</span><span class="n">proto</span><span class="o">.</span><span class="n">Execution</span> <span class="o">=</span> <span class="n">cmf</span><span class="o">.</span><span class="n">create_execution</span><span class="p">(</span>
    <span class="n">execution_type</span><span class="o">=</span><span class="s2">&quot;Prepare&quot;</span><span class="p">,</span>
    <span class="n">custom_properties</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;split&quot;</span><span class="p">:</span> <span class="n">split</span><span class="p">,</span> <span class="s2">&quot;seed&quot;</span><span class="p">:</span> <span class="n">seed</span><span class="p">}</span>
<span class="p">)</span>
</code></pre></div>
Args:
    execution_type: Type of the execution.(when create_new_execution is False, this is the name of execution)
    custom_properties: Developers can provide key value pairs with additional properties of the execution that
        need to be stored.</p>
<pre><code>cmd: command used to run this execution.

create_new_execution:bool = True, This can be used by advanced users to re-use executions
    This is applicable, when working with framework code like mmdet, pytorch lightning etc, where the
    custom call-backs are used to log metrics.
    if create_new_execution is True(Default), execution_type parameter will be used as the name of the execution type.
    if create_new_execution is False, if existing execution exist with the same name as execution_type.
    it will be reused.
    Only executions created with  create_new_execution as False will have "name" as a property.
</code></pre>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ml_metadata.proto.metadata_store_pb2.Execution">Execution</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Execution object from ML Metadata library associated with the new execution for this stage.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>cmflib/cmf.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">create_execution</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">execution_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">custom_properties</span><span class="p">:</span> <span class="n">t</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">t</span><span class="o">.</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">cmd</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">create_new_execution</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">mlpb</span><span class="o">.</span><span class="n">Execution</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create execution.</span>
<span class="sd">    Every call creates a unique execution. Execution can only be created within a context, so</span>
<span class="sd">    [create_context][cmflib.cmf.Cmf.create_context] must be called first.</span>
<span class="sd">    Example:</span>
<span class="sd">        ```python</span>
<span class="sd">        # Import CMF</span>
<span class="sd">        from cmflib.cmf import Cmf</span>
<span class="sd">        from ml_metadata.proto import metadata_store_pb2 as mlpb</span>
<span class="sd">        # Create CMF logger</span>
<span class="sd">        cmf = Cmf(filepath=&quot;mlmd&quot;, pipeline_name=&quot;test_pipeline&quot;)</span>
<span class="sd">        # Create or reuse context for this stage</span>
<span class="sd">        context: mlmd.proto.Context = cmf.create_context(</span>
<span class="sd">            pipeline_stage=&quot;prepare&quot;,</span>
<span class="sd">            custom_properties ={&quot;user-metadata1&quot;: &quot;metadata_value&quot;}</span>
<span class="sd">        )</span>
<span class="sd">        # Create a new execution for this stage run</span>
<span class="sd">        execution: mlmd.proto.Execution = cmf.create_execution(</span>
<span class="sd">            execution_type=&quot;Prepare&quot;,</span>
<span class="sd">            custom_properties = {&quot;split&quot;: split, &quot;seed&quot;: seed}</span>
<span class="sd">        )</span>
<span class="sd">        ```</span>
<span class="sd">    Args:</span>
<span class="sd">        execution_type: Type of the execution.(when create_new_execution is False, this is the name of execution)</span>
<span class="sd">        custom_properties: Developers can provide key value pairs with additional properties of the execution that</span>
<span class="sd">            need to be stored.</span>

<span class="sd">        cmd: command used to run this execution.</span>

<span class="sd">        create_new_execution:bool = True, This can be used by advanced users to re-use executions</span>
<span class="sd">            This is applicable, when working with framework code like mmdet, pytorch lightning etc, where the</span>
<span class="sd">            custom call-backs are used to log metrics.</span>
<span class="sd">            if create_new_execution is True(Default), execution_type parameter will be used as the name of the execution type.</span>
<span class="sd">            if create_new_execution is False, if existing execution exist with the same name as execution_type.</span>
<span class="sd">            it will be reused.</span>
<span class="sd">            Only executions created with  create_new_execution as False will have &quot;name&quot; as a property.</span>


<span class="sd">    Returns:</span>
<span class="sd">        Execution object from ML Metadata library associated with the new execution for this stage.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logging_dir</span> <span class="o">=</span> <span class="n">change_dir</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cmf_init_path</span><span class="p">)</span>
    <span class="c1"># Assigning current file name as stage and execution name</span>
    <span class="n">current_script</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">file_name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">current_script</span><span class="p">)</span>
    <span class="n">name_without_extension</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">file_name</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
    <span class="c1"># create context if not already created</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">child_context</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create_context</span><span class="p">(</span><span class="n">pipeline_stage</span><span class="o">=</span><span class="n">name_without_extension</span><span class="p">)</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">child_context</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Failed to create context for </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">pipeline_name</span><span class="si">}</span><span class="s2">!!&quot;</span>

    <span class="c1"># Initializing the execution related fields</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">metrics</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">input_artifacts</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">execution_label_props</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">custom_props</span> <span class="o">=</span> <span class="p">{}</span> <span class="k">if</span> <span class="n">custom_properties</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">custom_properties</span>
    <span class="n">git_repo</span> <span class="o">=</span> <span class="n">git_get_repo</span><span class="p">()</span>
    <span class="n">git_start_commit</span> <span class="o">=</span> <span class="n">git_get_commit</span><span class="p">()</span>
    <span class="n">cmd</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span> <span class="k">if</span> <span class="n">cmd</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">cmd</span>
    <span class="n">python_env</span><span class="o">=</span><span class="n">get_python_env</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">execution</span> <span class="o">=</span> <span class="n">create_new_execution_in_existing_run_context</span><span class="p">(</span>
        <span class="n">store</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="p">,</span>
        <span class="c1"># Type field when re-using executions</span>
        <span class="n">execution_type_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">child_context</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
        <span class="n">execution_name</span><span class="o">=</span><span class="n">execution_type</span><span class="p">,</span> 
        <span class="c1">#Name field if we are re-using executions</span>
        <span class="c1">#Type field , if creating new executions always </span>
        <span class="n">context_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">child_context</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
        <span class="n">execution</span><span class="o">=</span><span class="n">cmd</span><span class="p">,</span>
        <span class="n">pipeline_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">parent_context</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
        <span class="n">pipeline_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">parent_context</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
        <span class="n">git_repo</span><span class="o">=</span><span class="n">git_repo</span><span class="p">,</span>
        <span class="n">git_start_commit</span><span class="o">=</span><span class="n">git_start_commit</span><span class="p">,</span>
        <span class="n">python_env</span><span class="o">=</span><span class="n">python_env</span><span class="p">,</span>
        <span class="n">custom_properties</span><span class="o">=</span><span class="n">custom_props</span><span class="p">,</span>
        <span class="n">create_new_execution</span><span class="o">=</span><span class="n">create_new_execution</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">uuids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">execution</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s2">&quot;Execution_uuid&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">string_value</span>
    <span class="k">if</span> <span class="n">uuids</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">execution</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s2">&quot;Execution_uuid&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">string_value</span> <span class="o">=</span> <span class="n">uuids</span><span class="o">+</span><span class="s2">&quot;,&quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid1</span><span class="p">())</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">execution</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s2">&quot;Execution_uuid&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">string_value</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid1</span><span class="p">())</span>            
    <span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="o">.</span><span class="n">put_executions</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">execution</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">execution_name</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">execution</span><span class="o">.</span><span class="n">id</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> <span class="n">execution_type</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">execution_command</span> <span class="o">=</span> <span class="n">cmd</span>
    <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">custom_props</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">k</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">,</span> <span class="s2">&quot;_&quot;</span><span class="p">,</span> <span class="n">k</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">execution_label_props</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">execution_label_props</span><span class="p">[</span><span class="s2">&quot;Execution_Name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">execution_type</span> <span class="o">+</span> <span class="s2">&quot;:&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">execution</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">execution_label_props</span><span class="p">[</span><span class="s2">&quot;execution_command&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">cmd</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">create_execution_node</span><span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">execution_name</span><span class="p">,</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">child_context</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parent_context</span><span class="p">,</span>
        <span class="n">cmd</span><span class="p">,</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">execution</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
        <span class="n">custom_props</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">logging_dir</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">execution</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="cmflib.cmf.Cmf.update_execution" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">update_execution</span><span class="p">(</span><span class="n">execution_id</span><span class="p">,</span> <span class="n">custom_properties</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#cmflib.cmf.Cmf.update_execution" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Updates an existing execution.
The custom properties can be updated after creation of the execution.
The new custom properties is merged with earlier custom properties.
Example
    <div class="highlight"><pre><span></span><code><span class="c1"># Import CMF</span>
<span class="kn">from</span> <span class="nn">cmflib.cmf</span> <span class="kn">import</span> <span class="n">Cmf</span>
<span class="kn">from</span> <span class="nn">ml_metadata.proto</span> <span class="kn">import</span> <span class="n">metadata_store_pb2</span> <span class="k">as</span> <span class="n">mlpb</span>
<span class="c1"># Create CMF logger</span>
<span class="n">cmf</span> <span class="o">=</span> <span class="n">Cmf</span><span class="p">(</span><span class="n">filepath</span><span class="o">=</span><span class="s2">&quot;mlmd&quot;</span><span class="p">,</span> <span class="n">pipeline_name</span><span class="o">=</span><span class="s2">&quot;test_pipeline&quot;</span><span class="p">)</span>
<span class="c1"># Update a execution</span>
<span class="n">execution</span><span class="p">:</span> <span class="n">mlmd</span><span class="o">.</span><span class="n">proto</span><span class="o">.</span><span class="n">Execution</span> <span class="o">=</span> <span class="n">cmf</span><span class="o">.</span><span class="n">update_execution</span><span class="p">(</span>
    <span class="n">execution_id</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span>
    <span class="n">custom_properties</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;split&quot;</span><span class="p">:</span> <span class="n">split</span><span class="p">,</span> <span class="s2">&quot;seed&quot;</span><span class="p">:</span> <span class="n">seed</span><span class="p">}</span>
<span class="p">)</span>
</code></pre></div>
    Args:
        execution_id: id of the execution.
        custom_properties: Developers can provide key value pairs with additional properties of the execution that
        need to be updated.
    Returns:
        Execution object from ML Metadata library associated with the updated execution for this stage.</p>

            <details class="quote">
              <summary>Source code in <code>cmflib/cmf.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">update_execution</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">execution_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">custom_properties</span><span class="p">:</span> <span class="n">t</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">t</span><span class="o">.</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Updates an existing execution.</span>
<span class="sd">    The custom properties can be updated after creation of the execution.</span>
<span class="sd">    The new custom properties is merged with earlier custom properties.</span>
<span class="sd">    Example</span>
<span class="sd">        ```python</span>
<span class="sd">        # Import CMF</span>
<span class="sd">        from cmflib.cmf import Cmf</span>
<span class="sd">        from ml_metadata.proto import metadata_store_pb2 as mlpb</span>
<span class="sd">        # Create CMF logger</span>
<span class="sd">        cmf = Cmf(filepath=&quot;mlmd&quot;, pipeline_name=&quot;test_pipeline&quot;)</span>
<span class="sd">        # Update a execution</span>
<span class="sd">        execution: mlmd.proto.Execution = cmf.update_execution(</span>
<span class="sd">            execution_id=8,</span>
<span class="sd">            custom_properties = {&quot;split&quot;: split, &quot;seed&quot;: seed}</span>
<span class="sd">        )</span>
<span class="sd">        ```</span>
<span class="sd">        Args:</span>
<span class="sd">            execution_id: id of the execution.</span>
<span class="sd">            custom_properties: Developers can provide key value pairs with additional properties of the execution that</span>
<span class="sd">            need to be updated.</span>
<span class="sd">        Returns:</span>
<span class="sd">            Execution object from ML Metadata library associated with the updated execution for this stage.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">execution</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="o">.</span><span class="n">get_executions_by_id</span><span class="p">([</span><span class="n">execution_id</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">execution</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Error - no execution id&quot;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="n">execution_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="o">.</span><span class="n">get_execution_types_by_id</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">execution</span><span class="o">.</span><span class="n">type_id</span><span class="p">])[</span>
        <span class="mi">0</span>
    <span class="p">]</span>

    <span class="k">if</span> <span class="n">custom_properties</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">custom_properties</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">execution</span><span class="o">.</span><span class="n">custom_properties</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">int_value</span> <span class="o">=</span> <span class="n">value</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">execution</span><span class="o">.</span><span class="n">custom_properties</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">string_value</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span>
                    <span class="n">value</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="o">.</span><span class="n">put_executions</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">execution</span><span class="p">])</span>
    <span class="n">c_props</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">execution</span><span class="o">.</span><span class="n">custom_properties</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">key</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">,</span> <span class="s2">&quot;_&quot;</span><span class="p">,</span> <span class="n">k</span><span class="p">)</span>
        <span class="n">val_type</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">v</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="n">maxsplit</span><span class="o">=</span><span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">val_type</span> <span class="o">==</span> <span class="s2">&quot;string_value&quot;</span><span class="p">:</span>
            <span class="n">val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">execution</span><span class="o">.</span><span class="n">custom_properties</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="o">.</span><span class="n">string_value</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">val</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">v</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
        <span class="c1"># The properties value are stored in the format type:value hence,</span>
        <span class="c1"># taking only value</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">execution_label_props</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
        <span class="n">c_props</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">execution_name</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">execution</span><span class="o">.</span><span class="n">id</span><span class="p">)</span> <span class="o">+</span> \
        <span class="s2">&quot;,&quot;</span> <span class="o">+</span> <span class="n">execution_type</span><span class="o">.</span><span class="n">name</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">execution_command</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">execution</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s2">&quot;Execution&quot;</span><span class="p">]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">execution_label_props</span><span class="p">[</span><span class="s2">&quot;Execution_Name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">execution_type</span><span class="o">.</span><span class="n">name</span> <span class="o">+</span> <span class="s2">&quot;:&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">execution</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">execution_label_props</span><span class="p">[</span><span class="s2">&quot;execution_command&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">execution</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span>
        <span class="s2">&quot;Execution&quot;</span>
    <span class="p">]</span><span class="o">.</span><span class="n">string_value</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">create_execution_node</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">execution_name</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">child_context</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">parent_context</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">execution</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s2">&quot;Execution&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">string_value</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">execution</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="n">c_props</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">execution</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="cmflib.cmf.Cmf.log_dataset" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">log_dataset</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">event</span><span class="p">,</span> <span class="n">custom_properties</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">external</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

<a href="#cmflib.cmf.Cmf.log_dataset" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Logs a dataset as artifact.
This call adds the dataset to dvc. The dvc metadata file created (.dvc) will be added to git and committed. The
version of the  dataset is automatically obtained from the versioning software(DVC) and tracked as a metadata.
Example:
    <div class="highlight"><pre><span></span><code><span class="n">artifact</span><span class="p">:</span> <span class="n">mlmd</span><span class="o">.</span><span class="n">proto</span><span class="o">.</span><span class="n">Artifact</span> <span class="o">=</span> <span class="n">cmf</span><span class="o">.</span><span class="n">log_dataset</span><span class="p">(</span>
    <span class="n">url</span><span class="o">=</span><span class="s2">&quot;/repo/data.xml&quot;</span><span class="p">,</span>
    <span class="n">event</span><span class="o">=</span><span class="s2">&quot;input&quot;</span><span class="p">,</span>
    <span class="n">custom_properties</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;source&quot;</span><span class="p">:</span><span class="s2">&quot;kaggle&quot;</span><span class="p">}</span>
<span class="p">)</span>
</code></pre></div>
Args:
     url: The path to the dataset.
     event: Takes arguments <code>INPUT</code> OR <code>OUTPUT</code>.
     custom_properties: Dataset properties (key/value pairs).
Returns:
    Artifact object from ML Metadata library associated with the new dataset artifact.</p>

            <details class="quote">
              <summary>Source code in <code>cmflib/cmf.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span>
<span class="normal">703</span>
<span class="normal">704</span>
<span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span>
<span class="normal">710</span>
<span class="normal">711</span>
<span class="normal">712</span>
<span class="normal">713</span>
<span class="normal">714</span>
<span class="normal">715</span>
<span class="normal">716</span>
<span class="normal">717</span>
<span class="normal">718</span>
<span class="normal">719</span>
<span class="normal">720</span>
<span class="normal">721</span>
<span class="normal">722</span>
<span class="normal">723</span>
<span class="normal">724</span>
<span class="normal">725</span>
<span class="normal">726</span>
<span class="normal">727</span>
<span class="normal">728</span>
<span class="normal">729</span>
<span class="normal">730</span>
<span class="normal">731</span>
<span class="normal">732</span>
<span class="normal">733</span>
<span class="normal">734</span>
<span class="normal">735</span>
<span class="normal">736</span>
<span class="normal">737</span>
<span class="normal">738</span>
<span class="normal">739</span>
<span class="normal">740</span>
<span class="normal">741</span>
<span class="normal">742</span>
<span class="normal">743</span>
<span class="normal">744</span>
<span class="normal">745</span>
<span class="normal">746</span>
<span class="normal">747</span>
<span class="normal">748</span>
<span class="normal">749</span>
<span class="normal">750</span>
<span class="normal">751</span>
<span class="normal">752</span>
<span class="normal">753</span>
<span class="normal">754</span>
<span class="normal">755</span>
<span class="normal">756</span>
<span class="normal">757</span>
<span class="normal">758</span>
<span class="normal">759</span>
<span class="normal">760</span>
<span class="normal">761</span>
<span class="normal">762</span>
<span class="normal">763</span>
<span class="normal">764</span>
<span class="normal">765</span>
<span class="normal">766</span>
<span class="normal">767</span>
<span class="normal">768</span>
<span class="normal">769</span>
<span class="normal">770</span>
<span class="normal">771</span>
<span class="normal">772</span>
<span class="normal">773</span>
<span class="normal">774</span>
<span class="normal">775</span>
<span class="normal">776</span>
<span class="normal">777</span>
<span class="normal">778</span>
<span class="normal">779</span>
<span class="normal">780</span>
<span class="normal">781</span>
<span class="normal">782</span>
<span class="normal">783</span>
<span class="normal">784</span>
<span class="normal">785</span>
<span class="normal">786</span>
<span class="normal">787</span>
<span class="normal">788</span>
<span class="normal">789</span>
<span class="normal">790</span>
<span class="normal">791</span>
<span class="normal">792</span>
<span class="normal">793</span>
<span class="normal">794</span>
<span class="normal">795</span>
<span class="normal">796</span>
<span class="normal">797</span>
<span class="normal">798</span>
<span class="normal">799</span>
<span class="normal">800</span>
<span class="normal">801</span>
<span class="normal">802</span>
<span class="normal">803</span>
<span class="normal">804</span>
<span class="normal">805</span>
<span class="normal">806</span>
<span class="normal">807</span>
<span class="normal">808</span>
<span class="normal">809</span>
<span class="normal">810</span>
<span class="normal">811</span>
<span class="normal">812</span>
<span class="normal">813</span>
<span class="normal">814</span>
<span class="normal">815</span>
<span class="normal">816</span>
<span class="normal">817</span>
<span class="normal">818</span>
<span class="normal">819</span>
<span class="normal">820</span>
<span class="normal">821</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">log_dataset</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">url</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">event</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">custom_properties</span><span class="p">:</span> <span class="n">t</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">t</span><span class="o">.</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">external</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">mlpb</span><span class="o">.</span><span class="n">Artifact</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Logs a dataset as artifact.</span>
<span class="sd">    This call adds the dataset to dvc. The dvc metadata file created (.dvc) will be added to git and committed. The</span>
<span class="sd">    version of the  dataset is automatically obtained from the versioning software(DVC) and tracked as a metadata.</span>
<span class="sd">    Example:</span>
<span class="sd">        ```python</span>
<span class="sd">        artifact: mlmd.proto.Artifact = cmf.log_dataset(</span>
<span class="sd">            url=&quot;/repo/data.xml&quot;,</span>
<span class="sd">            event=&quot;input&quot;,</span>
<span class="sd">            custom_properties={&quot;source&quot;:&quot;kaggle&quot;}</span>
<span class="sd">        )</span>
<span class="sd">        ```</span>
<span class="sd">    Args:</span>
<span class="sd">         url: The path to the dataset.</span>
<span class="sd">         event: Takes arguments `INPUT` OR `OUTPUT`.</span>
<span class="sd">         custom_properties: Dataset properties (key/value pairs).</span>
<span class="sd">    Returns:</span>
<span class="sd">        Artifact object from ML Metadata library associated with the new dataset artifact.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logging_dir</span> <span class="o">=</span> <span class="n">change_dir</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cmf_init_path</span><span class="p">)</span>
    <span class="c1"># Assigning current file name as stage and execution name</span>
    <span class="n">current_script</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">file_name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">current_script</span><span class="p">)</span>
    <span class="n">name_without_extension</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">file_name</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
    <span class="c1"># create context if not already created</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">child_context</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create_context</span><span class="p">(</span><span class="n">pipeline_stage</span><span class="o">=</span><span class="n">name_without_extension</span><span class="p">)</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">child_context</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Failed to create context for </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">pipeline_name</span><span class="si">}</span><span class="s2">!!&quot;</span>

    <span class="c1"># create execution if not already created</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">execution</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create_execution</span><span class="p">(</span><span class="n">execution_type</span><span class="o">=</span><span class="n">name_without_extension</span><span class="p">)</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">execution</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Failed to create execution for </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">pipeline_name</span><span class="si">}</span><span class="s2">!!&quot;</span>

            <span class="c1">### To Do : Technical Debt. </span>
    <span class="c1"># If the dataset already exist , then we just link the existing dataset to the execution</span>
    <span class="c1"># We do not update the dataset properties . </span>
    <span class="c1"># We need to append the new properties to the existing dataset properties</span>
    <span class="n">custom_props</span> <span class="o">=</span> <span class="p">{}</span> <span class="k">if</span> <span class="n">custom_properties</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">custom_properties</span>
    <span class="n">git_repo</span> <span class="o">=</span> <span class="n">git_get_repo</span><span class="p">()</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">,</span> <span class="n">url</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">event_type</span> <span class="o">=</span> <span class="n">mlpb</span><span class="o">.</span><span class="n">Event</span><span class="o">.</span><span class="n">Type</span><span class="o">.</span><span class="n">OUTPUT</span>
    <span class="n">existing_artifact</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;input&quot;</span><span class="p">:</span>
        <span class="n">event_type</span> <span class="o">=</span> <span class="n">mlpb</span><span class="o">.</span><span class="n">Event</span><span class="o">.</span><span class="n">Type</span><span class="o">.</span><span class="n">INPUT</span>

    <span class="n">commit_output</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">execution</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
    <span class="n">c_hash</span> <span class="o">=</span> <span class="n">dvc_get_hash</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">c_hash</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Error in getting the dvc hash,return without logging&quot;</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="n">dataset_commit</span> <span class="o">=</span> <span class="n">c_hash</span>
    <span class="n">dvc_url</span> <span class="o">=</span> <span class="n">dvc_get_url</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
    <span class="n">dvc_url_with_pipeline</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">parent_context</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">dvc_url</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="n">url</span> <span class="o">=</span> <span class="n">url</span> <span class="o">+</span> <span class="s2">&quot;:&quot;</span> <span class="o">+</span> <span class="n">c_hash</span>
    <span class="k">if</span> <span class="n">c_hash</span> <span class="ow">and</span> <span class="n">c_hash</span><span class="o">.</span><span class="n">strip</span><span class="p">:</span>
        <span class="n">existing_artifact</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="o">.</span><span class="n">get_artifacts_by_uri</span><span class="p">(</span><span class="n">c_hash</span><span class="p">))</span>

    <span class="c1"># To Do - What happens when uri is the same but names are different</span>
    <span class="k">if</span> <span class="n">existing_artifact</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">existing_artifact</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">existing_artifact</span> <span class="o">=</span> <span class="n">existing_artifact</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

        <span class="c1"># Quick fix- Updating only the name</span>
        <span class="k">if</span> <span class="n">custom_properties</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">update_existing_artifact</span><span class="p">(</span>
                <span class="n">existing_artifact</span><span class="p">,</span> <span class="n">custom_properties</span><span class="p">)</span>
        <span class="n">uri</span> <span class="o">=</span> <span class="n">c_hash</span>
        <span class="c1"># update url for existing artifact</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_dataset_url</span><span class="p">(</span><span class="n">existing_artifact</span><span class="p">,</span> <span class="n">dvc_url_with_pipeline</span><span class="p">)</span>
        <span class="n">artifact</span> <span class="o">=</span> <span class="n">link_execution_to_artifact</span><span class="p">(</span>
            <span class="n">store</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="p">,</span>
            <span class="n">execution_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">execution</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="n">uri</span><span class="o">=</span><span class="n">uri</span><span class="p">,</span>
            <span class="n">input_name</span><span class="o">=</span><span class="n">url</span><span class="p">,</span>
            <span class="n">event_type</span><span class="o">=</span><span class="n">event_type</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># if((existing_artifact and len(existing_artifact )!= 0) and c_hash != &quot;&quot;):</span>
        <span class="c1">#   url = url + &quot;:&quot; + str(self.execution.id)</span>
        <span class="n">uri</span> <span class="o">=</span> <span class="n">c_hash</span> <span class="k">if</span> <span class="n">c_hash</span> <span class="ow">and</span> <span class="n">c_hash</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">else</span> <span class="nb">str</span><span class="p">(</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid1</span><span class="p">())</span>
        <span class="n">artifact</span> <span class="o">=</span> <span class="n">create_new_artifact_event_and_attribution</span><span class="p">(</span>
            <span class="n">store</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="p">,</span>
            <span class="n">execution_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">execution</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="n">context_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">child_context</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="n">uri</span><span class="o">=</span><span class="n">uri</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="n">url</span><span class="p">,</span>
            <span class="n">type_name</span><span class="o">=</span><span class="s2">&quot;Dataset&quot;</span><span class="p">,</span>
            <span class="n">event_type</span><span class="o">=</span><span class="n">event_type</span><span class="p">,</span>
            <span class="n">properties</span><span class="o">=</span><span class="p">{</span>
                <span class="s2">&quot;git_repo&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">git_repo</span><span class="p">),</span>
                <span class="c1"># passing c_hash value to commit</span>
                <span class="s2">&quot;Commit&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">dataset_commit</span><span class="p">),</span>
                <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">dvc_url_with_pipeline</span><span class="p">),</span>
            <span class="p">},</span>
            <span class="n">artifact_type_properties</span><span class="o">=</span><span class="p">{</span>
                <span class="s2">&quot;git_repo&quot;</span><span class="p">:</span> <span class="n">mlpb</span><span class="o">.</span><span class="n">STRING</span><span class="p">,</span>
                <span class="s2">&quot;Commit&quot;</span><span class="p">:</span> <span class="n">mlpb</span><span class="o">.</span><span class="n">STRING</span><span class="p">,</span>
                <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="n">mlpb</span><span class="o">.</span><span class="n">STRING</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="n">custom_properties</span><span class="o">=</span><span class="n">custom_props</span><span class="p">,</span>
            <span class="n">milliseconds_since_epoch</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">),</span>
        <span class="p">)</span>
    <span class="n">custom_props</span><span class="p">[</span><span class="s2">&quot;git_repo&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">git_repo</span>
    <span class="n">custom_props</span><span class="p">[</span><span class="s2">&quot;Commit&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">dataset_commit</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">execution_label_props</span><span class="p">[</span><span class="s2">&quot;git_repo&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">git_repo</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">execution_label_props</span><span class="p">[</span><span class="s2">&quot;Commit&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">dataset_commit</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">create_dataset_node</span><span class="p">(</span>
            <span class="n">name</span><span class="p">,</span>
            <span class="n">url</span><span class="p">,</span>
            <span class="n">uri</span><span class="p">,</span>
            <span class="n">event</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">execution</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">parent_context</span><span class="p">,</span>
            <span class="n">custom_props</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;input&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">input_artifacts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="p">{</span>
                    <span class="s2">&quot;Name&quot;</span><span class="p">:</span> <span class="n">name</span><span class="p">,</span>
                    <span class="s2">&quot;Path&quot;</span><span class="p">:</span> <span class="n">url</span><span class="p">,</span>
                    <span class="s2">&quot;URI&quot;</span><span class="p">:</span> <span class="n">uri</span><span class="p">,</span>
                    <span class="s2">&quot;Event&quot;</span><span class="p">:</span> <span class="n">event</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span>
                    <span class="s2">&quot;Execution_Name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">execution_name</span><span class="p">,</span>
                    <span class="s2">&quot;Type&quot;</span><span class="p">:</span> <span class="s2">&quot;Dataset&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;Execution_Command&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">execution_command</span><span class="p">,</span>
                    <span class="s2">&quot;Pipeline_Id&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent_context</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                    <span class="s2">&quot;Pipeline_Name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent_context</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                <span class="p">}</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">create_execution_links</span><span class="p">(</span><span class="n">uri</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="s2">&quot;Dataset&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">child_artifact</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;Name&quot;</span><span class="p">:</span> <span class="n">name</span><span class="p">,</span>
                <span class="s2">&quot;Path&quot;</span><span class="p">:</span> <span class="n">url</span><span class="p">,</span>
                <span class="s2">&quot;URI&quot;</span><span class="p">:</span> <span class="n">uri</span><span class="p">,</span>
                <span class="s2">&quot;Event&quot;</span><span class="p">:</span> <span class="n">event</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span>
                <span class="s2">&quot;Execution_Name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">execution_name</span><span class="p">,</span>
                <span class="s2">&quot;Type&quot;</span><span class="p">:</span> <span class="s2">&quot;Dataset&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Execution_Command&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">execution_command</span><span class="p">,</span>
                <span class="s2">&quot;Pipeline_Id&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent_context</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                <span class="s2">&quot;Pipeline_Name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent_context</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="p">}</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">create_artifact_relationships</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">input_artifacts</span><span class="p">,</span> <span class="n">child_artifact</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">execution_label_props</span>
            <span class="p">)</span>
    <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">logging_dir</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">artifact</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="cmflib.cmf.Cmf.log_dataset_with_version" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">log_dataset_with_version</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">version</span><span class="p">,</span> <span class="n">event</span><span class="p">,</span> <span class="n">props</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">custom_properties</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#cmflib.cmf.Cmf.log_dataset_with_version" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Logs a dataset when the version (hash) is known.
Example: 
  <div class="highlight"><pre><span></span><code><span class="n">artifact</span><span class="p">:</span> <span class="n">mlpb</span><span class="o">.</span><span class="n">Artifact</span> <span class="o">=</span> <span class="n">cmf</span><span class="o">.</span><span class="n">log_dataset_with_version</span><span class="p">(</span> 
    <span class="n">url</span><span class="o">=</span><span class="s2">&quot;path/to/dataset&quot;</span><span class="p">,</span> 
    <span class="n">version</span><span class="o">=</span><span class="s2">&quot;abcdef&quot;</span><span class="p">,</span>
    <span class="n">event</span><span class="o">=</span><span class="s2">&quot;output&quot;</span><span class="p">,</span>
    <span class="n">props</span><span class="o">=</span><span class="p">{</span> <span class="s2">&quot;git_repo&quot;</span><span class="p">:</span> <span class="s2">&quot;https://github.com/example/repo&quot;</span><span class="p">,</span>
            <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;/path/in/repo&quot;</span><span class="p">,</span> <span class="p">},</span>
    <span class="n">custom_properties</span><span class="o">=</span><span class="p">{</span> <span class="s2">&quot;custom_key&quot;</span><span class="p">:</span> <span class="s2">&quot;custom_value&quot;</span><span class="p">,</span> <span class="p">},</span> 
    <span class="p">)</span> 
</code></pre></div>
  Args: 
     url: Path to the dataset. 
     version: Hash or version identifier for the dataset. 
     event: Takes arguments <code>INPUT</code> or <code>OUTPUT</code>. 
     props: Optional properties for the dataset (e.g., git_repo, url). 
     custom_properties: Optional custom properties for the dataset.
  Returns:
     Artifact object from the ML Protocol Buffers library associated with the new dataset artifact.</p>

            <details class="quote">
              <summary>Source code in <code>cmflib/cmf.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 872</span>
<span class="normal"> 873</span>
<span class="normal"> 874</span>
<span class="normal"> 875</span>
<span class="normal"> 876</span>
<span class="normal"> 877</span>
<span class="normal"> 878</span>
<span class="normal"> 879</span>
<span class="normal"> 880</span>
<span class="normal"> 881</span>
<span class="normal"> 882</span>
<span class="normal"> 883</span>
<span class="normal"> 884</span>
<span class="normal"> 885</span>
<span class="normal"> 886</span>
<span class="normal"> 887</span>
<span class="normal"> 888</span>
<span class="normal"> 889</span>
<span class="normal"> 890</span>
<span class="normal"> 891</span>
<span class="normal"> 892</span>
<span class="normal"> 893</span>
<span class="normal"> 894</span>
<span class="normal"> 895</span>
<span class="normal"> 896</span>
<span class="normal"> 897</span>
<span class="normal"> 898</span>
<span class="normal"> 899</span>
<span class="normal"> 900</span>
<span class="normal"> 901</span>
<span class="normal"> 902</span>
<span class="normal"> 903</span>
<span class="normal"> 904</span>
<span class="normal"> 905</span>
<span class="normal"> 906</span>
<span class="normal"> 907</span>
<span class="normal"> 908</span>
<span class="normal"> 909</span>
<span class="normal"> 910</span>
<span class="normal"> 911</span>
<span class="normal"> 912</span>
<span class="normal"> 913</span>
<span class="normal"> 914</span>
<span class="normal"> 915</span>
<span class="normal"> 916</span>
<span class="normal"> 917</span>
<span class="normal"> 918</span>
<span class="normal"> 919</span>
<span class="normal"> 920</span>
<span class="normal"> 921</span>
<span class="normal"> 922</span>
<span class="normal"> 923</span>
<span class="normal"> 924</span>
<span class="normal"> 925</span>
<span class="normal"> 926</span>
<span class="normal"> 927</span>
<span class="normal"> 928</span>
<span class="normal"> 929</span>
<span class="normal"> 930</span>
<span class="normal"> 931</span>
<span class="normal"> 932</span>
<span class="normal"> 933</span>
<span class="normal"> 934</span>
<span class="normal"> 935</span>
<span class="normal"> 936</span>
<span class="normal"> 937</span>
<span class="normal"> 938</span>
<span class="normal"> 939</span>
<span class="normal"> 940</span>
<span class="normal"> 941</span>
<span class="normal"> 942</span>
<span class="normal"> 943</span>
<span class="normal"> 944</span>
<span class="normal"> 945</span>
<span class="normal"> 946</span>
<span class="normal"> 947</span>
<span class="normal"> 948</span>
<span class="normal"> 949</span>
<span class="normal"> 950</span>
<span class="normal"> 951</span>
<span class="normal"> 952</span>
<span class="normal"> 953</span>
<span class="normal"> 954</span>
<span class="normal"> 955</span>
<span class="normal"> 956</span>
<span class="normal"> 957</span>
<span class="normal"> 958</span>
<span class="normal"> 959</span>
<span class="normal"> 960</span>
<span class="normal"> 961</span>
<span class="normal"> 962</span>
<span class="normal"> 963</span>
<span class="normal"> 964</span>
<span class="normal"> 965</span>
<span class="normal"> 966</span>
<span class="normal"> 967</span>
<span class="normal"> 968</span>
<span class="normal"> 969</span>
<span class="normal"> 970</span>
<span class="normal"> 971</span>
<span class="normal"> 972</span>
<span class="normal"> 973</span>
<span class="normal"> 974</span>
<span class="normal"> 975</span>
<span class="normal"> 976</span>
<span class="normal"> 977</span>
<span class="normal"> 978</span>
<span class="normal"> 979</span>
<span class="normal"> 980</span>
<span class="normal"> 981</span>
<span class="normal"> 982</span>
<span class="normal"> 983</span>
<span class="normal"> 984</span>
<span class="normal"> 985</span>
<span class="normal"> 986</span>
<span class="normal"> 987</span>
<span class="normal"> 988</span>
<span class="normal"> 989</span>
<span class="normal"> 990</span>
<span class="normal"> 991</span>
<span class="normal"> 992</span>
<span class="normal"> 993</span>
<span class="normal"> 994</span>
<span class="normal"> 995</span>
<span class="normal"> 996</span>
<span class="normal"> 997</span>
<span class="normal"> 998</span>
<span class="normal"> 999</span>
<span class="normal">1000</span>
<span class="normal">1001</span>
<span class="normal">1002</span>
<span class="normal">1003</span>
<span class="normal">1004</span>
<span class="normal">1005</span>
<span class="normal">1006</span>
<span class="normal">1007</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">log_dataset_with_version</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">url</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">version</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">event</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">props</span><span class="p">:</span> <span class="n">t</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">t</span><span class="o">.</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">custom_properties</span><span class="p">:</span> <span class="n">t</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">t</span><span class="o">.</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">mlpb</span><span class="o">.</span><span class="n">Artifact</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Logs a dataset when the version (hash) is known.</span>
<span class="sd">       Example: </span>
<span class="sd">         ```python </span>
<span class="sd">         artifact: mlpb.Artifact = cmf.log_dataset_with_version( </span>
<span class="sd">             url=&quot;path/to/dataset&quot;, </span>
<span class="sd">             version=&quot;abcdef&quot;,</span>
<span class="sd">             event=&quot;output&quot;,</span>
<span class="sd">             props={ &quot;git_repo&quot;: &quot;https://github.com/example/repo&quot;,</span>
<span class="sd">                     &quot;url&quot;: &quot;/path/in/repo&quot;, },</span>
<span class="sd">             custom_properties={ &quot;custom_key&quot;: &quot;custom_value&quot;, }, </span>
<span class="sd">             ) </span>
<span class="sd">         ```</span>
<span class="sd">         Args: </span>
<span class="sd">            url: Path to the dataset. </span>
<span class="sd">            version: Hash or version identifier for the dataset. </span>
<span class="sd">            event: Takes arguments `INPUT` or `OUTPUT`. </span>
<span class="sd">            props: Optional properties for the dataset (e.g., git_repo, url). </span>
<span class="sd">            custom_properties: Optional custom properties for the dataset.</span>
<span class="sd">         Returns:</span>
<span class="sd">            Artifact object from the ML Protocol Buffers library associated with the new dataset artifact. </span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">props</span> <span class="o">=</span> <span class="p">{}</span> <span class="k">if</span> <span class="n">props</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">props</span>
    <span class="n">custom_props</span> <span class="o">=</span> <span class="p">{}</span> <span class="k">if</span> <span class="n">custom_properties</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">custom_properties</span>
    <span class="n">git_repo</span> <span class="o">=</span> <span class="n">props</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;git_repo&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">url</span>
    <span class="n">event_type</span> <span class="o">=</span> <span class="n">mlpb</span><span class="o">.</span><span class="n">Event</span><span class="o">.</span><span class="n">Type</span><span class="o">.</span><span class="n">OUTPUT</span>
    <span class="n">existing_artifact</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">c_hash</span> <span class="o">=</span> <span class="n">version</span>
    <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;input&quot;</span><span class="p">:</span>
        <span class="n">event_type</span> <span class="o">=</span> <span class="n">mlpb</span><span class="o">.</span><span class="n">Event</span><span class="o">.</span><span class="n">Type</span><span class="o">.</span><span class="n">INPUT</span>

    <span class="c1"># dataset_commit = commit_output(url, self.execution.id)</span>

    <span class="n">dataset_commit</span> <span class="o">=</span> <span class="n">version</span>
    <span class="n">url</span> <span class="o">=</span> <span class="n">url</span> <span class="o">+</span> <span class="s2">&quot;:&quot;</span> <span class="o">+</span> <span class="n">c_hash</span>
    <span class="k">if</span> <span class="n">c_hash</span> <span class="ow">and</span> <span class="n">c_hash</span><span class="o">.</span><span class="n">strip</span><span class="p">:</span>
        <span class="n">existing_artifact</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="o">.</span><span class="n">get_artifacts_by_uri</span><span class="p">(</span><span class="n">c_hash</span><span class="p">))</span>

    <span class="c1"># To Do - What happens when uri is the same but names are different</span>
    <span class="k">if</span> <span class="n">existing_artifact</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">existing_artifact</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">existing_artifact</span> <span class="o">=</span> <span class="n">existing_artifact</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

        <span class="c1"># Quick fix- Updating only the name</span>
        <span class="k">if</span> <span class="n">custom_properties</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">update_existing_artifact</span><span class="p">(</span>
                <span class="n">existing_artifact</span><span class="p">,</span> <span class="n">custom_properties</span><span class="p">)</span>
        <span class="n">uri</span> <span class="o">=</span> <span class="n">c_hash</span>
        <span class="c1"># update url for existing artifact</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_dataset_url</span><span class="p">(</span><span class="n">existing_artifact</span><span class="p">,</span> <span class="n">props</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;url&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">))</span>
        <span class="n">artifact</span> <span class="o">=</span> <span class="n">link_execution_to_artifact</span><span class="p">(</span>
            <span class="n">store</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="p">,</span>
            <span class="n">execution_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">execution</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="n">uri</span><span class="o">=</span><span class="n">uri</span><span class="p">,</span>
            <span class="n">input_name</span><span class="o">=</span><span class="n">url</span><span class="p">,</span>
            <span class="n">event_type</span><span class="o">=</span><span class="n">event_type</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># if((existing_artifact and len(existing_artifact )!= 0) and c_hash != &quot;&quot;):</span>
        <span class="c1">#   url = url + &quot;:&quot; + str(self.execution.id)</span>
        <span class="n">uri</span> <span class="o">=</span> <span class="n">c_hash</span> <span class="k">if</span> <span class="n">c_hash</span> <span class="ow">and</span> <span class="n">c_hash</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">else</span> <span class="nb">str</span><span class="p">(</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid1</span><span class="p">())</span>
        <span class="n">artifact</span> <span class="o">=</span> <span class="n">create_new_artifact_event_and_attribution</span><span class="p">(</span>
            <span class="n">store</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="p">,</span>
            <span class="n">execution_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">execution</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="n">context_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">child_context</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="n">uri</span><span class="o">=</span><span class="n">uri</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="n">url</span><span class="p">,</span>
            <span class="n">type_name</span><span class="o">=</span><span class="s2">&quot;Dataset&quot;</span><span class="p">,</span>
            <span class="n">event_type</span><span class="o">=</span><span class="n">event_type</span><span class="p">,</span>
            <span class="n">properties</span><span class="o">=</span><span class="p">{</span>
                <span class="s2">&quot;git_repo&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">git_repo</span><span class="p">),</span>
                <span class="s2">&quot;Commit&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">dataset_commit</span><span class="p">),</span>
                <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="n">props</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;url&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">),</span>
            <span class="p">},</span>
            <span class="n">artifact_type_properties</span><span class="o">=</span><span class="p">{</span>
                <span class="s2">&quot;git_repo&quot;</span><span class="p">:</span> <span class="n">mlpb</span><span class="o">.</span><span class="n">STRING</span><span class="p">,</span>
                <span class="s2">&quot;Commit&quot;</span><span class="p">:</span> <span class="n">mlpb</span><span class="o">.</span><span class="n">STRING</span><span class="p">,</span>
                <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="n">mlpb</span><span class="o">.</span><span class="n">STRING</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="n">custom_properties</span><span class="o">=</span><span class="n">custom_props</span><span class="p">,</span>
            <span class="n">milliseconds_since_epoch</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">),</span>
        <span class="p">)</span>
    <span class="n">custom_props</span><span class="p">[</span><span class="s2">&quot;git_repo&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">git_repo</span>
    <span class="n">custom_props</span><span class="p">[</span><span class="s2">&quot;Commit&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">dataset_commit</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">execution_label_props</span><span class="p">[</span><span class="s2">&quot;git_repo&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">git_repo</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">execution_label_props</span><span class="p">[</span><span class="s2">&quot;Commit&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">dataset_commit</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">create_dataset_node</span><span class="p">(</span>
            <span class="n">name</span><span class="p">,</span>
            <span class="n">url</span><span class="p">,</span>
            <span class="n">uri</span><span class="p">,</span>
            <span class="n">event</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">execution</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">parent_context</span><span class="p">,</span>
            <span class="n">custom_props</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;input&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">input_artifacts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="p">{</span>
                    <span class="s2">&quot;Name&quot;</span><span class="p">:</span> <span class="n">name</span><span class="p">,</span>
                    <span class="s2">&quot;Path&quot;</span><span class="p">:</span> <span class="n">url</span><span class="p">,</span>
                    <span class="s2">&quot;URI&quot;</span><span class="p">:</span> <span class="n">uri</span><span class="p">,</span>
                    <span class="s2">&quot;Event&quot;</span><span class="p">:</span> <span class="n">event</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span>
                    <span class="s2">&quot;Execution_Name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">execution_name</span><span class="p">,</span>
                    <span class="s2">&quot;Type&quot;</span><span class="p">:</span> <span class="s2">&quot;Dataset&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;Execution_Command&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">execution_command</span><span class="p">,</span>
                    <span class="s2">&quot;Pipeline_Id&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent_context</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                    <span class="s2">&quot;Pipeline_Name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent_context</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                <span class="p">}</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">create_execution_links</span><span class="p">(</span><span class="n">uri</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="s2">&quot;Dataset&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">child_artifact</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;Name&quot;</span><span class="p">:</span> <span class="n">name</span><span class="p">,</span>
                <span class="s2">&quot;Path&quot;</span><span class="p">:</span> <span class="n">url</span><span class="p">,</span>
                <span class="s2">&quot;URI&quot;</span><span class="p">:</span> <span class="n">uri</span><span class="p">,</span>
                <span class="s2">&quot;Event&quot;</span><span class="p">:</span> <span class="n">event</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span>
                <span class="s2">&quot;Execution_Name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">execution_name</span><span class="p">,</span>
                <span class="s2">&quot;Type&quot;</span><span class="p">:</span> <span class="s2">&quot;Dataset&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Execution_Command&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">execution_command</span><span class="p">,</span>
                <span class="s2">&quot;Pipeline_Id&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent_context</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                <span class="s2">&quot;Pipeline_Name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent_context</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="p">}</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">create_artifact_relationships</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">input_artifacts</span><span class="p">,</span> <span class="n">child_artifact</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">execution_label_props</span>
            <span class="p">)</span>
    <span class="k">return</span> <span class="n">artifact</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="cmflib.cmf.Cmf.log_model" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">log_model</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">event</span><span class="p">,</span> <span class="n">model_framework</span><span class="o">=</span><span class="s1">&#39;Default&#39;</span><span class="p">,</span> <span class="n">model_type</span><span class="o">=</span><span class="s1">&#39;Default&#39;</span><span class="p">,</span> <span class="n">model_name</span><span class="o">=</span><span class="s1">&#39;Default&#39;</span><span class="p">,</span> <span class="n">custom_properties</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#cmflib.cmf.Cmf.log_model" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Logs a model.
The model is added to dvc and the metadata file (.dvc) gets committed to git.
Example:
    <div class="highlight"><pre><span></span><code><span class="n">artifact</span><span class="p">:</span> <span class="n">mlmd</span><span class="o">.</span><span class="n">proto</span><span class="o">.</span><span class="n">Artifact</span><span class="o">=</span> <span class="n">cmf</span><span class="o">.</span><span class="n">log_model</span><span class="p">(</span>
    <span class="n">path</span><span class="o">=</span><span class="s2">&quot;path/to/model.pkl&quot;</span><span class="p">,</span>
    <span class="n">event</span><span class="o">=</span><span class="s2">&quot;output&quot;</span><span class="p">,</span>
    <span class="n">model_framework</span><span class="o">=</span><span class="s2">&quot;SKlearn&quot;</span><span class="p">,</span>
    <span class="n">model_type</span><span class="o">=</span><span class="s2">&quot;RandomForestClassifier&quot;</span><span class="p">,</span>
    <span class="n">model_name</span><span class="o">=</span><span class="s2">&quot;RandomForestClassifier:default&quot;</span>
<span class="p">)</span>
</code></pre></div>
Args:
    path: Path to the model file.
    event: Takes arguments <code>INPUT</code> OR <code>OUTPUT</code>.
    model_framework: Framework used to create the model.
    model_type: Type of model algorithm used.
    model_name: Name of the algorithm used.
    custom_properties: The model properties.
Returns:
    Artifact object from ML Metadata library associated with the new model artifact.</p>

            <details class="quote">
              <summary>Source code in <code>cmflib/cmf.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1010</span>
<span class="normal">1011</span>
<span class="normal">1012</span>
<span class="normal">1013</span>
<span class="normal">1014</span>
<span class="normal">1015</span>
<span class="normal">1016</span>
<span class="normal">1017</span>
<span class="normal">1018</span>
<span class="normal">1019</span>
<span class="normal">1020</span>
<span class="normal">1021</span>
<span class="normal">1022</span>
<span class="normal">1023</span>
<span class="normal">1024</span>
<span class="normal">1025</span>
<span class="normal">1026</span>
<span class="normal">1027</span>
<span class="normal">1028</span>
<span class="normal">1029</span>
<span class="normal">1030</span>
<span class="normal">1031</span>
<span class="normal">1032</span>
<span class="normal">1033</span>
<span class="normal">1034</span>
<span class="normal">1035</span>
<span class="normal">1036</span>
<span class="normal">1037</span>
<span class="normal">1038</span>
<span class="normal">1039</span>
<span class="normal">1040</span>
<span class="normal">1041</span>
<span class="normal">1042</span>
<span class="normal">1043</span>
<span class="normal">1044</span>
<span class="normal">1045</span>
<span class="normal">1046</span>
<span class="normal">1047</span>
<span class="normal">1048</span>
<span class="normal">1049</span>
<span class="normal">1050</span>
<span class="normal">1051</span>
<span class="normal">1052</span>
<span class="normal">1053</span>
<span class="normal">1054</span>
<span class="normal">1055</span>
<span class="normal">1056</span>
<span class="normal">1057</span>
<span class="normal">1058</span>
<span class="normal">1059</span>
<span class="normal">1060</span>
<span class="normal">1061</span>
<span class="normal">1062</span>
<span class="normal">1063</span>
<span class="normal">1064</span>
<span class="normal">1065</span>
<span class="normal">1066</span>
<span class="normal">1067</span>
<span class="normal">1068</span>
<span class="normal">1069</span>
<span class="normal">1070</span>
<span class="normal">1071</span>
<span class="normal">1072</span>
<span class="normal">1073</span>
<span class="normal">1074</span>
<span class="normal">1075</span>
<span class="normal">1076</span>
<span class="normal">1077</span>
<span class="normal">1078</span>
<span class="normal">1079</span>
<span class="normal">1080</span>
<span class="normal">1081</span>
<span class="normal">1082</span>
<span class="normal">1083</span>
<span class="normal">1084</span>
<span class="normal">1085</span>
<span class="normal">1086</span>
<span class="normal">1087</span>
<span class="normal">1088</span>
<span class="normal">1089</span>
<span class="normal">1090</span>
<span class="normal">1091</span>
<span class="normal">1092</span>
<span class="normal">1093</span>
<span class="normal">1094</span>
<span class="normal">1095</span>
<span class="normal">1096</span>
<span class="normal">1097</span>
<span class="normal">1098</span>
<span class="normal">1099</span>
<span class="normal">1100</span>
<span class="normal">1101</span>
<span class="normal">1102</span>
<span class="normal">1103</span>
<span class="normal">1104</span>
<span class="normal">1105</span>
<span class="normal">1106</span>
<span class="normal">1107</span>
<span class="normal">1108</span>
<span class="normal">1109</span>
<span class="normal">1110</span>
<span class="normal">1111</span>
<span class="normal">1112</span>
<span class="normal">1113</span>
<span class="normal">1114</span>
<span class="normal">1115</span>
<span class="normal">1116</span>
<span class="normal">1117</span>
<span class="normal">1118</span>
<span class="normal">1119</span>
<span class="normal">1120</span>
<span class="normal">1121</span>
<span class="normal">1122</span>
<span class="normal">1123</span>
<span class="normal">1124</span>
<span class="normal">1125</span>
<span class="normal">1126</span>
<span class="normal">1127</span>
<span class="normal">1128</span>
<span class="normal">1129</span>
<span class="normal">1130</span>
<span class="normal">1131</span>
<span class="normal">1132</span>
<span class="normal">1133</span>
<span class="normal">1134</span>
<span class="normal">1135</span>
<span class="normal">1136</span>
<span class="normal">1137</span>
<span class="normal">1138</span>
<span class="normal">1139</span>
<span class="normal">1140</span>
<span class="normal">1141</span>
<span class="normal">1142</span>
<span class="normal">1143</span>
<span class="normal">1144</span>
<span class="normal">1145</span>
<span class="normal">1146</span>
<span class="normal">1147</span>
<span class="normal">1148</span>
<span class="normal">1149</span>
<span class="normal">1150</span>
<span class="normal">1151</span>
<span class="normal">1152</span>
<span class="normal">1153</span>
<span class="normal">1154</span>
<span class="normal">1155</span>
<span class="normal">1156</span>
<span class="normal">1157</span>
<span class="normal">1158</span>
<span class="normal">1159</span>
<span class="normal">1160</span>
<span class="normal">1161</span>
<span class="normal">1162</span>
<span class="normal">1163</span>
<span class="normal">1164</span>
<span class="normal">1165</span>
<span class="normal">1166</span>
<span class="normal">1167</span>
<span class="normal">1168</span>
<span class="normal">1169</span>
<span class="normal">1170</span>
<span class="normal">1171</span>
<span class="normal">1172</span>
<span class="normal">1173</span>
<span class="normal">1174</span>
<span class="normal">1175</span>
<span class="normal">1176</span>
<span class="normal">1177</span>
<span class="normal">1178</span>
<span class="normal">1179</span>
<span class="normal">1180</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">log_model</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">event</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">model_framework</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;Default&quot;</span><span class="p">,</span>
    <span class="n">model_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;Default&quot;</span><span class="p">,</span>
    <span class="n">model_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;Default&quot;</span><span class="p">,</span>
    <span class="n">custom_properties</span><span class="p">:</span> <span class="n">t</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">t</span><span class="o">.</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">mlpb</span><span class="o">.</span><span class="n">Artifact</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Logs a model.</span>
<span class="sd">    The model is added to dvc and the metadata file (.dvc) gets committed to git.</span>
<span class="sd">    Example:</span>
<span class="sd">        ```python</span>
<span class="sd">        artifact: mlmd.proto.Artifact= cmf.log_model(</span>
<span class="sd">            path=&quot;path/to/model.pkl&quot;,</span>
<span class="sd">            event=&quot;output&quot;,</span>
<span class="sd">            model_framework=&quot;SKlearn&quot;,</span>
<span class="sd">            model_type=&quot;RandomForestClassifier&quot;,</span>
<span class="sd">            model_name=&quot;RandomForestClassifier:default&quot;</span>
<span class="sd">        )</span>
<span class="sd">        ```</span>
<span class="sd">    Args:</span>
<span class="sd">        path: Path to the model file.</span>
<span class="sd">        event: Takes arguments `INPUT` OR `OUTPUT`.</span>
<span class="sd">        model_framework: Framework used to create the model.</span>
<span class="sd">        model_type: Type of model algorithm used.</span>
<span class="sd">        model_name: Name of the algorithm used.</span>
<span class="sd">        custom_properties: The model properties.</span>
<span class="sd">    Returns:</span>
<span class="sd">        Artifact object from ML Metadata library associated with the new model artifact.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">logging_dir</span> <span class="o">=</span> <span class="n">change_dir</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cmf_init_path</span><span class="p">)</span>
    <span class="c1"># Assigning current file name as stage and execution name</span>
    <span class="n">current_script</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">file_name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">current_script</span><span class="p">)</span>
    <span class="n">name_without_extension</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">file_name</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
    <span class="c1"># create context if not already created</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">child_context</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create_context</span><span class="p">(</span><span class="n">pipeline_stage</span><span class="o">=</span><span class="n">name_without_extension</span><span class="p">)</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">child_context</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Failed to create context for </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">pipeline_name</span><span class="si">}</span><span class="s2">!!&quot;</span>

    <span class="c1"># create execution if not already created</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">execution</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create_execution</span><span class="p">(</span><span class="n">execution_type</span><span class="o">=</span><span class="n">name_without_extension</span><span class="p">)</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">execution</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Failed to create execution for </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">pipeline_name</span><span class="si">}</span><span class="s2">!!&quot;</span>


    <span class="c1"># To Do : Technical Debt. </span>
    <span class="c1"># If the model already exist , then we just link the existing model to the execution</span>
    <span class="c1"># We do not update the model properties . </span>
    <span class="c1"># We need to append the new properties to the existing model properties</span>
    <span class="k">if</span> <span class="n">custom_properties</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">custom_properties</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">custom_props</span> <span class="o">=</span> <span class="p">{}</span> <span class="k">if</span> <span class="n">custom_properties</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">custom_properties</span>
    <span class="c1"># name = re.split(&#39;/&#39;, path)[-1]</span>
    <span class="n">event_type</span> <span class="o">=</span> <span class="n">mlpb</span><span class="o">.</span><span class="n">Event</span><span class="o">.</span><span class="n">Type</span><span class="o">.</span><span class="n">OUTPUT</span>
    <span class="n">existing_artifact</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;input&quot;</span><span class="p">:</span>
        <span class="n">event_type</span> <span class="o">=</span> <span class="n">mlpb</span><span class="o">.</span><span class="n">Event</span><span class="o">.</span><span class="n">Type</span><span class="o">.</span><span class="n">INPUT</span>

    <span class="n">commit_output</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">execution</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
    <span class="n">c_hash</span> <span class="o">=</span> <span class="n">dvc_get_hash</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">c_hash</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Error in getting the dvc hash,return without logging&quot;</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="n">model_commit</span> <span class="o">=</span> <span class="n">c_hash</span>

    <span class="c1"># If connecting to an existing artifact - The name of the artifact is</span>
    <span class="c1"># used as path/steps/key</span>
    <span class="n">model_uri</span> <span class="o">=</span> <span class="n">path</span> <span class="o">+</span> <span class="s2">&quot;:&quot;</span> <span class="o">+</span> <span class="n">c_hash</span>
    <span class="n">dvc_url</span> <span class="o">=</span> <span class="n">dvc_get_url</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
    <span class="n">url</span> <span class="o">=</span> <span class="n">dvc_url</span>
    <span class="n">url_with_pipeline</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">parent_context</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="n">uri</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="k">if</span> <span class="n">c_hash</span> <span class="ow">and</span> <span class="n">c_hash</span><span class="o">.</span><span class="n">strip</span><span class="p">():</span>
        <span class="n">uri</span> <span class="o">=</span> <span class="n">c_hash</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="n">existing_artifact</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="o">.</span><span class="n">get_artifacts_by_uri</span><span class="p">(</span><span class="n">uri</span><span class="p">))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Model commit failed, Model uri empty&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="p">(</span>
        <span class="n">existing_artifact</span>
        <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">existing_artifact</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span>
    <span class="p">):</span>
        <span class="c1"># update url for existing artifact</span>
        <span class="n">existing_artifact</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">update_model_url</span><span class="p">(</span>
            <span class="n">existing_artifact</span><span class="p">,</span> <span class="n">url_with_pipeline</span>
        <span class="p">)</span>
        <span class="n">artifact</span> <span class="o">=</span> <span class="n">link_execution_to_artifact</span><span class="p">(</span>
            <span class="n">store</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="p">,</span>
            <span class="n">execution_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">execution</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="n">uri</span><span class="o">=</span><span class="n">c_hash</span><span class="p">,</span>
            <span class="n">input_name</span><span class="o">=</span><span class="n">model_uri</span><span class="p">,</span>
            <span class="n">event_type</span><span class="o">=</span><span class="n">event_type</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">model_uri</span> <span class="o">=</span>  <span class="n">model_uri</span> <span class="o">+</span> <span class="s2">&quot;:&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">execution</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">uri</span> <span class="o">=</span> <span class="n">c_hash</span> <span class="k">if</span> <span class="n">c_hash</span> <span class="ow">and</span> <span class="n">c_hash</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">else</span> <span class="nb">str</span><span class="p">(</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid1</span><span class="p">())</span>
        <span class="n">model_uri</span> <span class="o">=</span> <span class="n">model_uri</span> <span class="o">+</span> <span class="s2">&quot;:&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">execution</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="n">artifact</span> <span class="o">=</span> <span class="n">create_new_artifact_event_and_attribution</span><span class="p">(</span>
            <span class="n">store</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="p">,</span>
            <span class="n">execution_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">execution</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="n">context_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">child_context</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="n">uri</span><span class="o">=</span><span class="n">uri</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="n">model_uri</span><span class="p">,</span>
            <span class="n">type_name</span><span class="o">=</span><span class="s2">&quot;Model&quot;</span><span class="p">,</span>
            <span class="n">event_type</span><span class="o">=</span><span class="n">event_type</span><span class="p">,</span>
            <span class="n">properties</span><span class="o">=</span><span class="p">{</span>
                <span class="s2">&quot;model_framework&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">model_framework</span><span class="p">),</span>
                <span class="s2">&quot;model_type&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">model_type</span><span class="p">),</span>
                <span class="s2">&quot;model_name&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">model_name</span><span class="p">),</span>
                <span class="c1"># passing c_hash value to commit</span>
                <span class="s2">&quot;Commit&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">model_commit</span><span class="p">),</span>
                <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">url_with_pipeline</span><span class="p">),</span>
            <span class="p">},</span>
            <span class="n">artifact_type_properties</span><span class="o">=</span><span class="p">{</span>
                <span class="s2">&quot;model_framework&quot;</span><span class="p">:</span> <span class="n">mlpb</span><span class="o">.</span><span class="n">STRING</span><span class="p">,</span>
                <span class="s2">&quot;model_type&quot;</span><span class="p">:</span> <span class="n">mlpb</span><span class="o">.</span><span class="n">STRING</span><span class="p">,</span>
                <span class="s2">&quot;model_name&quot;</span><span class="p">:</span> <span class="n">mlpb</span><span class="o">.</span><span class="n">STRING</span><span class="p">,</span>
                <span class="s2">&quot;Commit&quot;</span><span class="p">:</span> <span class="n">mlpb</span><span class="o">.</span><span class="n">STRING</span><span class="p">,</span>
                <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="n">mlpb</span><span class="o">.</span><span class="n">STRING</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="n">custom_properties</span><span class="o">=</span><span class="n">custom_props</span><span class="p">,</span>
            <span class="n">milliseconds_since_epoch</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">),</span>
        <span class="p">)</span>
    <span class="c1"># custom_properties[&quot;Commit&quot;] = model_commit</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">execution_label_props</span><span class="p">[</span><span class="s2">&quot;Commit&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">model_commit</span>
    <span class="c1">#To DO model nodes should be similar to dataset nodes when we create neo4j</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">create_model_node</span><span class="p">(</span>
            <span class="n">model_uri</span><span class="p">,</span>
            <span class="n">uri</span><span class="p">,</span>
            <span class="n">event</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">execution</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">parent_context</span><span class="p">,</span>
            <span class="n">custom_props</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;input&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">input_artifacts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="p">{</span>
                    <span class="s2">&quot;Name&quot;</span><span class="p">:</span> <span class="n">model_uri</span><span class="p">,</span>
                    <span class="s2">&quot;URI&quot;</span><span class="p">:</span> <span class="n">uri</span><span class="p">,</span>
                    <span class="s2">&quot;Event&quot;</span><span class="p">:</span> <span class="n">event</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span>
                    <span class="s2">&quot;Execution_Name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">execution_name</span><span class="p">,</span>
                    <span class="s2">&quot;Type&quot;</span><span class="p">:</span> <span class="s2">&quot;Model&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;Execution_Command&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">execution_command</span><span class="p">,</span>
                    <span class="s2">&quot;Pipeline_Id&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent_context</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                    <span class="s2">&quot;Pipeline_Name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent_context</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                <span class="p">}</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">create_execution_links</span><span class="p">(</span><span class="n">uri</span><span class="p">,</span> <span class="n">model_uri</span><span class="p">,</span> <span class="s2">&quot;Model&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">child_artifact</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;Name&quot;</span><span class="p">:</span> <span class="n">model_uri</span><span class="p">,</span>
                <span class="s2">&quot;URI&quot;</span><span class="p">:</span> <span class="n">uri</span><span class="p">,</span>
                <span class="s2">&quot;Event&quot;</span><span class="p">:</span> <span class="n">event</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span>
                <span class="s2">&quot;Execution_Name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">execution_name</span><span class="p">,</span>
                <span class="s2">&quot;Type&quot;</span><span class="p">:</span> <span class="s2">&quot;Model&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Execution_Command&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">execution_command</span><span class="p">,</span>
                <span class="s2">&quot;Pipeline_Id&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent_context</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                <span class="s2">&quot;Pipeline_Name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent_context</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="p">}</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">create_artifact_relationships</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">input_artifacts</span><span class="p">,</span> <span class="n">child_artifact</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">execution_label_props</span>
            <span class="p">)</span>
    <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">logging_dir</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">artifact</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="cmflib.cmf.Cmf.log_model_with_version" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">log_model_with_version</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">event</span><span class="p">,</span> <span class="n">props</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">custom_properties</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#cmflib.cmf.Cmf.log_model_with_version" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Logs a model when the version(hash) is known
 The model is added to dvc and the metadata file (.dvc) gets committed to git.
Example:
    <div class="highlight"><pre><span></span><code><span class="n">artifact</span><span class="p">:</span> <span class="n">mlmd</span><span class="o">.</span><span class="n">proto</span><span class="o">.</span><span class="n">Artifact</span><span class="o">=</span> <span class="n">cmf</span><span class="o">.</span><span class="n">log_model_with_version</span><span class="p">(</span>
    <span class="n">path</span><span class="o">=</span><span class="s2">&quot;path/to/model.pkl&quot;</span><span class="p">,</span>
    <span class="n">event</span><span class="o">=</span><span class="s2">&quot;output&quot;</span><span class="p">,</span>
    <span class="n">props</span><span class="o">=</span><span class="p">{</span>
            <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;/home/user/local-storage/bf/629ccd5cd008066b72c04f9a918737&quot;</span><span class="p">,</span>
            <span class="s2">&quot;model_type&quot;</span><span class="p">:</span> <span class="s2">&quot;RandomForestClassifier&quot;</span><span class="p">,</span>
            <span class="s2">&quot;model_name&quot;</span><span class="p">:</span> <span class="s2">&quot;RandomForestClassifier:default&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Commit&quot;</span><span class="p">:</span> <span class="s2">&quot;commit 1146dad8b74cae205db6a3132ea403db1e4032e5&quot;</span><span class="p">,</span>
            <span class="s2">&quot;model_framework&quot;</span><span class="p">:</span> <span class="s2">&quot;SKlearn&quot;</span><span class="p">,</span>
           <span class="p">},</span>
    <span class="n">custom_properties</span><span class="o">=</span><span class="p">{</span>
            <span class="s2">&quot;uri&quot;</span><span class="p">:</span> <span class="s2">&quot;bf629ccd5cd008066b72c04f9a918737&quot;</span><span class="p">,</span>
    <span class="p">},</span>

<span class="p">)</span>
</code></pre></div>
Args:
    path: Path to the model file.
    event: Takes arguments <code>INPUT</code> OR <code>OUTPUT</code>.
    props: Model artifact properties.
    custom_properties: The model properties.
Returns:
    Artifact object from ML Metadata library associated with the new model artifact.</p>

            <details class="quote">
              <summary>Source code in <code>cmflib/cmf.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1183</span>
<span class="normal">1184</span>
<span class="normal">1185</span>
<span class="normal">1186</span>
<span class="normal">1187</span>
<span class="normal">1188</span>
<span class="normal">1189</span>
<span class="normal">1190</span>
<span class="normal">1191</span>
<span class="normal">1192</span>
<span class="normal">1193</span>
<span class="normal">1194</span>
<span class="normal">1195</span>
<span class="normal">1196</span>
<span class="normal">1197</span>
<span class="normal">1198</span>
<span class="normal">1199</span>
<span class="normal">1200</span>
<span class="normal">1201</span>
<span class="normal">1202</span>
<span class="normal">1203</span>
<span class="normal">1204</span>
<span class="normal">1205</span>
<span class="normal">1206</span>
<span class="normal">1207</span>
<span class="normal">1208</span>
<span class="normal">1209</span>
<span class="normal">1210</span>
<span class="normal">1211</span>
<span class="normal">1212</span>
<span class="normal">1213</span>
<span class="normal">1214</span>
<span class="normal">1215</span>
<span class="normal">1216</span>
<span class="normal">1217</span>
<span class="normal">1218</span>
<span class="normal">1219</span>
<span class="normal">1220</span>
<span class="normal">1221</span>
<span class="normal">1222</span>
<span class="normal">1223</span>
<span class="normal">1224</span>
<span class="normal">1225</span>
<span class="normal">1226</span>
<span class="normal">1227</span>
<span class="normal">1228</span>
<span class="normal">1229</span>
<span class="normal">1230</span>
<span class="normal">1231</span>
<span class="normal">1232</span>
<span class="normal">1233</span>
<span class="normal">1234</span>
<span class="normal">1235</span>
<span class="normal">1236</span>
<span class="normal">1237</span>
<span class="normal">1238</span>
<span class="normal">1239</span>
<span class="normal">1240</span>
<span class="normal">1241</span>
<span class="normal">1242</span>
<span class="normal">1243</span>
<span class="normal">1244</span>
<span class="normal">1245</span>
<span class="normal">1246</span>
<span class="normal">1247</span>
<span class="normal">1248</span>
<span class="normal">1249</span>
<span class="normal">1250</span>
<span class="normal">1251</span>
<span class="normal">1252</span>
<span class="normal">1253</span>
<span class="normal">1254</span>
<span class="normal">1255</span>
<span class="normal">1256</span>
<span class="normal">1257</span>
<span class="normal">1258</span>
<span class="normal">1259</span>
<span class="normal">1260</span>
<span class="normal">1261</span>
<span class="normal">1262</span>
<span class="normal">1263</span>
<span class="normal">1264</span>
<span class="normal">1265</span>
<span class="normal">1266</span>
<span class="normal">1267</span>
<span class="normal">1268</span>
<span class="normal">1269</span>
<span class="normal">1270</span>
<span class="normal">1271</span>
<span class="normal">1272</span>
<span class="normal">1273</span>
<span class="normal">1274</span>
<span class="normal">1275</span>
<span class="normal">1276</span>
<span class="normal">1277</span>
<span class="normal">1278</span>
<span class="normal">1279</span>
<span class="normal">1280</span>
<span class="normal">1281</span>
<span class="normal">1282</span>
<span class="normal">1283</span>
<span class="normal">1284</span>
<span class="normal">1285</span>
<span class="normal">1286</span>
<span class="normal">1287</span>
<span class="normal">1288</span>
<span class="normal">1289</span>
<span class="normal">1290</span>
<span class="normal">1291</span>
<span class="normal">1292</span>
<span class="normal">1293</span>
<span class="normal">1294</span>
<span class="normal">1295</span>
<span class="normal">1296</span>
<span class="normal">1297</span>
<span class="normal">1298</span>
<span class="normal">1299</span>
<span class="normal">1300</span>
<span class="normal">1301</span>
<span class="normal">1302</span>
<span class="normal">1303</span>
<span class="normal">1304</span>
<span class="normal">1305</span>
<span class="normal">1306</span>
<span class="normal">1307</span>
<span class="normal">1308</span>
<span class="normal">1309</span>
<span class="normal">1310</span>
<span class="normal">1311</span>
<span class="normal">1312</span>
<span class="normal">1313</span>
<span class="normal">1314</span>
<span class="normal">1315</span>
<span class="normal">1316</span>
<span class="normal">1317</span>
<span class="normal">1318</span>
<span class="normal">1319</span>
<span class="normal">1320</span>
<span class="normal">1321</span>
<span class="normal">1322</span>
<span class="normal">1323</span>
<span class="normal">1324</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">log_model_with_version</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">event</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">props</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">custom_properties</span><span class="p">:</span> <span class="n">t</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">t</span><span class="o">.</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">object</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Logs a model when the version(hash) is known</span>
<span class="sd">     The model is added to dvc and the metadata file (.dvc) gets committed to git.</span>
<span class="sd">    Example:</span>
<span class="sd">        ```python</span>
<span class="sd">        artifact: mlmd.proto.Artifact= cmf.log_model_with_version(</span>
<span class="sd">            path=&quot;path/to/model.pkl&quot;,</span>
<span class="sd">            event=&quot;output&quot;,</span>
<span class="sd">            props={</span>
<span class="sd">                    &quot;url&quot;: &quot;/home/user/local-storage/bf/629ccd5cd008066b72c04f9a918737&quot;,</span>
<span class="sd">                    &quot;model_type&quot;: &quot;RandomForestClassifier&quot;,</span>
<span class="sd">                    &quot;model_name&quot;: &quot;RandomForestClassifier:default&quot;,</span>
<span class="sd">                    &quot;Commit&quot;: &quot;commit 1146dad8b74cae205db6a3132ea403db1e4032e5&quot;,</span>
<span class="sd">                    &quot;model_framework&quot;: &quot;SKlearn&quot;,</span>
<span class="sd">                   },</span>
<span class="sd">            custom_properties={</span>
<span class="sd">                    &quot;uri&quot;: &quot;bf629ccd5cd008066b72c04f9a918737&quot;,</span>
<span class="sd">            },</span>

<span class="sd">        )</span>
<span class="sd">        ```</span>
<span class="sd">    Args:</span>
<span class="sd">        path: Path to the model file.</span>
<span class="sd">        event: Takes arguments `INPUT` OR `OUTPUT`.</span>
<span class="sd">        props: Model artifact properties.</span>
<span class="sd">        custom_properties: The model properties.</span>
<span class="sd">    Returns:</span>
<span class="sd">        Artifact object from ML Metadata library associated with the new model artifact.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">custom_properties</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">custom_properties</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">custom_props</span> <span class="o">=</span> <span class="p">{}</span> <span class="k">if</span> <span class="n">custom_properties</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">custom_properties</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">,</span> <span class="n">path</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">event_type</span> <span class="o">=</span> <span class="n">mlpb</span><span class="o">.</span><span class="n">Event</span><span class="o">.</span><span class="n">Type</span><span class="o">.</span><span class="n">OUTPUT</span>
    <span class="n">existing_artifact</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;input&quot;</span><span class="p">:</span>
        <span class="n">event_type</span> <span class="o">=</span> <span class="n">mlpb</span><span class="o">.</span><span class="n">Event</span><span class="o">.</span><span class="n">Type</span><span class="o">.</span><span class="n">INPUT</span>

    <span class="c1"># props[&quot;commit&quot;] = &quot;&quot; # To do get from incoming data</span>
    <span class="n">c_hash</span> <span class="o">=</span> <span class="n">props</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;uri&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">)</span>
    <span class="c1"># If connecting to an existing artifact - The name of the artifact is used as path/steps/key</span>
    <span class="n">model_uri</span> <span class="o">=</span> <span class="n">path</span> <span class="o">+</span> <span class="s2">&quot;:&quot;</span> <span class="o">+</span> <span class="n">c_hash</span>
    <span class="c1"># dvc_url = dvc_get_url(path, False)</span>
    <span class="n">url</span> <span class="o">=</span> <span class="n">props</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;url&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
    <span class="c1"># uri = &quot;&quot;</span>
    <span class="k">if</span> <span class="n">c_hash</span> <span class="ow">and</span> <span class="n">c_hash</span><span class="o">.</span><span class="n">strip</span><span class="p">():</span>
        <span class="n">uri</span> <span class="o">=</span> <span class="n">c_hash</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="n">existing_artifact</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="o">.</span><span class="n">get_artifacts_by_uri</span><span class="p">(</span><span class="n">uri</span><span class="p">))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Model commit failed, Model uri empty&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="p">(</span>
        <span class="n">existing_artifact</span>
        <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">existing_artifact</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span>
    <span class="p">):</span>
        <span class="c1"># update url for existing artifact</span>
        <span class="n">existing_artifact</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">update_model_url</span><span class="p">(</span><span class="n">existing_artifact</span><span class="p">,</span> <span class="n">url</span><span class="p">)</span>
        <span class="n">artifact</span> <span class="o">=</span> <span class="n">link_execution_to_artifact</span><span class="p">(</span>
            <span class="n">store</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="p">,</span>
            <span class="n">execution_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">execution</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="n">uri</span><span class="o">=</span><span class="n">c_hash</span><span class="p">,</span>
            <span class="n">input_name</span><span class="o">=</span><span class="n">model_uri</span><span class="p">,</span>
            <span class="n">event_type</span><span class="o">=</span><span class="n">event_type</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">model_uri</span> <span class="o">=</span> <span class="n">artifact</span><span class="o">.</span><span class="n">name</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">uri</span> <span class="o">=</span> <span class="n">c_hash</span> <span class="k">if</span> <span class="n">c_hash</span> <span class="ow">and</span> <span class="n">c_hash</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">else</span> <span class="nb">str</span><span class="p">(</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid1</span><span class="p">())</span>
        <span class="n">model_uri</span> <span class="o">=</span> <span class="n">model_uri</span> <span class="o">+</span> <span class="s2">&quot;:&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">execution</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="n">artifact</span> <span class="o">=</span> <span class="n">create_new_artifact_event_and_attribution</span><span class="p">(</span>
            <span class="n">store</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="p">,</span>
            <span class="n">execution_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">execution</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="n">context_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">child_context</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="n">uri</span><span class="o">=</span><span class="n">uri</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="n">model_uri</span><span class="p">,</span>
            <span class="n">type_name</span><span class="o">=</span><span class="s2">&quot;Model&quot;</span><span class="p">,</span>
            <span class="n">event_type</span><span class="o">=</span><span class="n">event_type</span><span class="p">,</span>
            <span class="n">properties</span><span class="o">=</span><span class="p">{</span>
                <span class="s2">&quot;model_framework&quot;</span><span class="p">:</span> <span class="n">props</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;model_framework&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
                <span class="s2">&quot;model_type&quot;</span><span class="p">:</span> <span class="n">props</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;model_type&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
                <span class="s2">&quot;model_name&quot;</span><span class="p">:</span> <span class="n">props</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;model_name&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
                <span class="s2">&quot;Commit&quot;</span><span class="p">:</span> <span class="n">props</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;Commit&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
                <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">url</span><span class="p">),</span>
            <span class="p">},</span>
            <span class="n">artifact_type_properties</span><span class="o">=</span><span class="p">{</span>
                <span class="s2">&quot;model_framework&quot;</span><span class="p">:</span> <span class="n">mlpb</span><span class="o">.</span><span class="n">STRING</span><span class="p">,</span>
                <span class="s2">&quot;model_type&quot;</span><span class="p">:</span> <span class="n">mlpb</span><span class="o">.</span><span class="n">STRING</span><span class="p">,</span>
                <span class="s2">&quot;model_name&quot;</span><span class="p">:</span> <span class="n">mlpb</span><span class="o">.</span><span class="n">STRING</span><span class="p">,</span>
                <span class="s2">&quot;Commit&quot;</span><span class="p">:</span> <span class="n">mlpb</span><span class="o">.</span><span class="n">STRING</span><span class="p">,</span>
                <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="n">mlpb</span><span class="o">.</span><span class="n">STRING</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="n">custom_properties</span><span class="o">=</span><span class="n">custom_props</span><span class="p">,</span>
            <span class="n">milliseconds_since_epoch</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">),</span>
        <span class="p">)</span>
    <span class="c1"># custom_properties[&quot;Commit&quot;] = model_commit</span>
    <span class="c1"># custom_props[&quot;url&quot;] = url</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">execution_label_props</span><span class="p">[</span><span class="s2">&quot;Commit&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">props</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;Commit&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">create_model_node</span><span class="p">(</span>
            <span class="n">model_uri</span><span class="p">,</span>
            <span class="n">uri</span><span class="p">,</span>
            <span class="n">event</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">execution</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">parent_context</span><span class="p">,</span>
            <span class="n">custom_props</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;input&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">input_artifacts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="p">{</span>
                    <span class="s2">&quot;Name&quot;</span><span class="p">:</span> <span class="n">model_uri</span><span class="p">,</span>
                    <span class="s2">&quot;URI&quot;</span><span class="p">:</span> <span class="n">uri</span><span class="p">,</span>
                    <span class="s2">&quot;Event&quot;</span><span class="p">:</span> <span class="n">event</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span>
                    <span class="s2">&quot;Execution_Name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">execution_name</span><span class="p">,</span>
                    <span class="s2">&quot;Type&quot;</span><span class="p">:</span> <span class="s2">&quot;Model&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;Execution_Command&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">execution_command</span><span class="p">,</span>
                    <span class="s2">&quot;Pipeline_Id&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent_context</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                    <span class="s2">&quot;Pipeline_Name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent_context</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                <span class="p">}</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">create_execution_links</span><span class="p">(</span><span class="n">uri</span><span class="p">,</span> <span class="n">model_uri</span><span class="p">,</span> <span class="s2">&quot;Model&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">child_artifact</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;Name&quot;</span><span class="p">:</span> <span class="n">model_uri</span><span class="p">,</span>
                <span class="s2">&quot;URI&quot;</span><span class="p">:</span> <span class="n">uri</span><span class="p">,</span>
                <span class="s2">&quot;Event&quot;</span><span class="p">:</span> <span class="n">event</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span>
                <span class="s2">&quot;Execution_Name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">execution_name</span><span class="p">,</span>
                <span class="s2">&quot;Type&quot;</span><span class="p">:</span> <span class="s2">&quot;Model&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Execution_Command&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">execution_command</span><span class="p">,</span>
                <span class="s2">&quot;Pipeline_Id&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent_context</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                <span class="s2">&quot;Pipeline_Name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent_context</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="p">}</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">create_artifact_relationships</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">input_artifacts</span><span class="p">,</span> <span class="n">child_artifact</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">execution_label_props</span>
            <span class="p">)</span>

    <span class="k">return</span> <span class="n">artifact</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="cmflib.cmf.Cmf.log_execution_metrics_from_client" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">log_execution_metrics_from_client</span><span class="p">(</span><span class="n">metrics_name</span><span class="p">,</span> <span class="n">custom_properties</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#cmflib.cmf.Cmf.log_execution_metrics_from_client" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Logs execution metrics from a client.
Data from pre-existing metrics from client side is used to create identical metrics on server side. 
Example: 
  <div class="highlight"><pre><span></span><code><span class="n">artifact</span><span class="p">:</span> <span class="n">mlpb</span><span class="o">.</span><span class="n">Artifact</span> <span class="o">=</span> <span class="n">cmf</span><span class="o">.</span><span class="n">log_execution_metrics_from_client</span><span class="p">(</span> 
        <span class="n">metrics_name</span><span class="o">=</span><span class="s2">&quot;example_metrics:uri:123&quot;</span><span class="p">,</span> 
        <span class="n">custom_properties</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;custom_key&quot;</span><span class="p">:</span> <span class="s2">&quot;custom_value&quot;</span><span class="p">},</span> 
        <span class="p">)</span>
</code></pre></div>
  Args: 
     metrics_name: Name of the metrics in the format "name:uri:execution_id". 
     custom_properties: Optional custom properties for the metrics. 
  Returns: 
     Artifact object from the ML Protocol Buffers library associated with the metrics artifact.</p>

            <details class="quote">
              <summary>Source code in <code>cmflib/cmf.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1326</span>
<span class="normal">1327</span>
<span class="normal">1328</span>
<span class="normal">1329</span>
<span class="normal">1330</span>
<span class="normal">1331</span>
<span class="normal">1332</span>
<span class="normal">1333</span>
<span class="normal">1334</span>
<span class="normal">1335</span>
<span class="normal">1336</span>
<span class="normal">1337</span>
<span class="normal">1338</span>
<span class="normal">1339</span>
<span class="normal">1340</span>
<span class="normal">1341</span>
<span class="normal">1342</span>
<span class="normal">1343</span>
<span class="normal">1344</span>
<span class="normal">1345</span>
<span class="normal">1346</span>
<span class="normal">1347</span>
<span class="normal">1348</span>
<span class="normal">1349</span>
<span class="normal">1350</span>
<span class="normal">1351</span>
<span class="normal">1352</span>
<span class="normal">1353</span>
<span class="normal">1354</span>
<span class="normal">1355</span>
<span class="normal">1356</span>
<span class="normal">1357</span>
<span class="normal">1358</span>
<span class="normal">1359</span>
<span class="normal">1360</span>
<span class="normal">1361</span>
<span class="normal">1362</span>
<span class="normal">1363</span>
<span class="normal">1364</span>
<span class="normal">1365</span>
<span class="normal">1366</span>
<span class="normal">1367</span>
<span class="normal">1368</span>
<span class="normal">1369</span>
<span class="normal">1370</span>
<span class="normal">1371</span>
<span class="normal">1372</span>
<span class="normal">1373</span>
<span class="normal">1374</span>
<span class="normal">1375</span>
<span class="normal">1376</span>
<span class="normal">1377</span>
<span class="normal">1378</span>
<span class="normal">1379</span>
<span class="normal">1380</span>
<span class="normal">1381</span>
<span class="normal">1382</span>
<span class="normal">1383</span>
<span class="normal">1384</span>
<span class="normal">1385</span>
<span class="normal">1386</span>
<span class="normal">1387</span>
<span class="normal">1388</span>
<span class="normal">1389</span>
<span class="normal">1390</span>
<span class="normal">1391</span>
<span class="normal">1392</span>
<span class="normal">1393</span>
<span class="normal">1394</span>
<span class="normal">1395</span>
<span class="normal">1396</span>
<span class="normal">1397</span>
<span class="normal">1398</span>
<span class="normal">1399</span>
<span class="normal">1400</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">log_execution_metrics_from_client</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">metrics_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                                     <span class="n">custom_properties</span><span class="p">:</span> <span class="n">t</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">t</span><span class="o">.</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">mlpb</span><span class="o">.</span><span class="n">Artifact</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; Logs execution metrics from a client.</span>
<span class="sd">        Data from pre-existing metrics from client side is used to create identical metrics on server side. </span>
<span class="sd">        Example: </span>
<span class="sd">          ```python </span>
<span class="sd">          artifact: mlpb.Artifact = cmf.log_execution_metrics_from_client( </span>
<span class="sd">                  metrics_name=&quot;example_metrics:uri:123&quot;, </span>
<span class="sd">                  custom_properties={&quot;custom_key&quot;: &quot;custom_value&quot;}, </span>
<span class="sd">                  )</span>
<span class="sd">          ``` </span>
<span class="sd">          Args: </span>
<span class="sd">             metrics_name: Name of the metrics in the format &quot;name:uri:execution_id&quot;. </span>
<span class="sd">             custom_properties: Optional custom properties for the metrics. </span>
<span class="sd">          Returns: </span>
<span class="sd">             Artifact object from the ML Protocol Buffers library associated with the metrics artifact.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">metrics</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">custom_props</span> <span class="o">=</span> <span class="p">{}</span> <span class="k">if</span> <span class="n">custom_properties</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">custom_properties</span>
    <span class="n">existing_artifact</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">name_tokens</span> <span class="o">=</span> <span class="n">metrics_name</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">name_tokens</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">name_tokens</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">:</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">name_tokens</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">uri</span> <span class="o">=</span> <span class="n">name_tokens</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">execution_id</span> <span class="o">=</span> <span class="n">name_tokens</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error : metrics name </span><span class="si">{</span><span class="n">metrics_name</span><span class="si">}</span><span class="s2"> is not in the correct format&quot;</span><span class="p">)</span>
        <span class="k">return</span> 

    <span class="c1">#we need to add the execution id to the metrics name</span>
    <span class="n">new_metrics_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">uri</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">execution</span><span class="o">.</span><span class="n">id</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="n">existing_artifacts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="o">.</span><span class="n">get_artifacts_by_uri</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>

    <span class="n">existing_artifact</span> <span class="o">=</span> <span class="n">existing_artifacts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="n">existing_artifacts</span> <span class="k">else</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">existing_artifact</span> <span class="ow">or</span> \
       <span class="p">((</span><span class="n">existing_artifact</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span>
        <span class="p">(</span><span class="n">existing_artifact</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">new_metrics_name</span><span class="p">)):</span>  <span class="c1">#we need to add the artifact otherwise its already there </span>
        <span class="n">metrics</span> <span class="o">=</span> <span class="n">create_new_artifact_event_and_attribution</span><span class="p">(</span>
        <span class="n">store</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="p">,</span>
        <span class="n">execution_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">execution</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
        <span class="n">context_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">child_context</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
        <span class="n">uri</span><span class="o">=</span><span class="n">uri</span><span class="p">,</span>
        <span class="n">name</span><span class="o">=</span><span class="n">new_metrics_name</span><span class="p">,</span>
        <span class="n">type_name</span><span class="o">=</span><span class="s2">&quot;Metrics&quot;</span><span class="p">,</span>
        <span class="n">event_type</span><span class="o">=</span><span class="n">mlpb</span><span class="o">.</span><span class="n">Event</span><span class="o">.</span><span class="n">Type</span><span class="o">.</span><span class="n">OUTPUT</span><span class="p">,</span>
        <span class="n">properties</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;metrics_name&quot;</span><span class="p">:</span> <span class="n">metrics_name</span><span class="p">},</span>
        <span class="n">artifact_type_properties</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;metrics_name&quot;</span><span class="p">:</span> <span class="n">mlpb</span><span class="o">.</span><span class="n">STRING</span><span class="p">},</span>
        <span class="n">custom_properties</span><span class="o">=</span><span class="n">custom_props</span><span class="p">,</span>
        <span class="n">milliseconds_since_epoch</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">),</span>
    <span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="p">:</span>
            <span class="c1"># To do create execution_links</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">create_metrics_node</span><span class="p">(</span>
                <span class="n">metrics_name</span><span class="p">,</span>
                <span class="n">uri</span><span class="p">,</span>
                <span class="s2">&quot;output&quot;</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">execution</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">parent_context</span><span class="p">,</span>
                <span class="n">custom_props</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">child_artifact</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;Name&quot;</span><span class="p">:</span> <span class="n">metrics_name</span><span class="p">,</span>
                <span class="s2">&quot;URI&quot;</span><span class="p">:</span> <span class="n">uri</span><span class="p">,</span>
                <span class="s2">&quot;Event&quot;</span><span class="p">:</span> <span class="s2">&quot;output&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Execution_Name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">execution_name</span><span class="p">,</span>
                <span class="s2">&quot;Type&quot;</span><span class="p">:</span> <span class="s2">&quot;Metrics&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Execution_Command&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">execution_command</span><span class="p">,</span>
                <span class="s2">&quot;Pipeline_Id&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent_context</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                <span class="s2">&quot;Pipeline_Name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent_context</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="p">}</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">create_artifact_relationships</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">input_artifacts</span><span class="p">,</span> <span class="n">child_artifact</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">execution_label_props</span>
            <span class="p">)</span>
    <span class="k">return</span> <span class="n">metrics</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="cmflib.cmf.Cmf.log_execution_metrics" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">log_execution_metrics</span><span class="p">(</span><span class="n">metrics_name</span><span class="p">,</span> <span class="n">custom_properties</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#cmflib.cmf.Cmf.log_execution_metrics" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Log the metadata associated with the execution (coarse-grained tracking).
It is stored as a metrics artifact. This does not have a backing physical file, unlike other artifacts that we
have.
Example:
    <div class="highlight"><pre><span></span><code><span class="n">exec_metrics</span><span class="p">:</span> <span class="n">mlpb</span><span class="o">.</span><span class="n">Artifact</span> <span class="o">=</span> <span class="n">cmf</span><span class="o">.</span><span class="n">log_execution_metrics</span><span class="p">(</span>
    <span class="n">metrics_name</span><span class="o">=</span><span class="s2">&quot;Training_Metrics&quot;</span><span class="p">,</span>
    <span class="p">{</span><span class="s2">&quot;auc&quot;</span><span class="p">:</span> <span class="n">auc</span><span class="p">,</span> <span class="s2">&quot;loss&quot;</span><span class="p">:</span> <span class="n">loss</span><span class="p">}</span>
<span class="p">)</span>
</code></pre></div>
Args:
    metrics_name: Name to identify the metrics.
    custom_properties: Dictionary with metric values.
Returns:
      Artifact object from ML Metadata library associated with the new coarse-grained metrics artifact.</p>

            <details class="quote">
              <summary>Source code in <code>cmflib/cmf.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1403</span>
<span class="normal">1404</span>
<span class="normal">1405</span>
<span class="normal">1406</span>
<span class="normal">1407</span>
<span class="normal">1408</span>
<span class="normal">1409</span>
<span class="normal">1410</span>
<span class="normal">1411</span>
<span class="normal">1412</span>
<span class="normal">1413</span>
<span class="normal">1414</span>
<span class="normal">1415</span>
<span class="normal">1416</span>
<span class="normal">1417</span>
<span class="normal">1418</span>
<span class="normal">1419</span>
<span class="normal">1420</span>
<span class="normal">1421</span>
<span class="normal">1422</span>
<span class="normal">1423</span>
<span class="normal">1424</span>
<span class="normal">1425</span>
<span class="normal">1426</span>
<span class="normal">1427</span>
<span class="normal">1428</span>
<span class="normal">1429</span>
<span class="normal">1430</span>
<span class="normal">1431</span>
<span class="normal">1432</span>
<span class="normal">1433</span>
<span class="normal">1434</span>
<span class="normal">1435</span>
<span class="normal">1436</span>
<span class="normal">1437</span>
<span class="normal">1438</span>
<span class="normal">1439</span>
<span class="normal">1440</span>
<span class="normal">1441</span>
<span class="normal">1442</span>
<span class="normal">1443</span>
<span class="normal">1444</span>
<span class="normal">1445</span>
<span class="normal">1446</span>
<span class="normal">1447</span>
<span class="normal">1448</span>
<span class="normal">1449</span>
<span class="normal">1450</span>
<span class="normal">1451</span>
<span class="normal">1452</span>
<span class="normal">1453</span>
<span class="normal">1454</span>
<span class="normal">1455</span>
<span class="normal">1456</span>
<span class="normal">1457</span>
<span class="normal">1458</span>
<span class="normal">1459</span>
<span class="normal">1460</span>
<span class="normal">1461</span>
<span class="normal">1462</span>
<span class="normal">1463</span>
<span class="normal">1464</span>
<span class="normal">1465</span>
<span class="normal">1466</span>
<span class="normal">1467</span>
<span class="normal">1468</span>
<span class="normal">1469</span>
<span class="normal">1470</span>
<span class="normal">1471</span>
<span class="normal">1472</span>
<span class="normal">1473</span>
<span class="normal">1474</span>
<span class="normal">1475</span>
<span class="normal">1476</span>
<span class="normal">1477</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">log_execution_metrics</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">metrics_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">custom_properties</span><span class="p">:</span> <span class="n">t</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">t</span><span class="o">.</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">mlpb</span><span class="o">.</span><span class="n">Artifact</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Log the metadata associated with the execution (coarse-grained tracking).</span>
<span class="sd">    It is stored as a metrics artifact. This does not have a backing physical file, unlike other artifacts that we</span>
<span class="sd">    have.</span>
<span class="sd">    Example:</span>
<span class="sd">        ```python</span>
<span class="sd">        exec_metrics: mlpb.Artifact = cmf.log_execution_metrics(</span>
<span class="sd">            metrics_name=&quot;Training_Metrics&quot;,</span>
<span class="sd">            {&quot;auc&quot;: auc, &quot;loss&quot;: loss}</span>
<span class="sd">        )</span>
<span class="sd">        ```</span>
<span class="sd">    Args:</span>
<span class="sd">        metrics_name: Name to identify the metrics.</span>
<span class="sd">        custom_properties: Dictionary with metric values.</span>
<span class="sd">    Returns:</span>
<span class="sd">          Artifact object from ML Metadata library associated with the new coarse-grained metrics artifact.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logging_dir</span> <span class="o">=</span> <span class="n">change_dir</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cmf_init_path</span><span class="p">)</span>
    <span class="c1"># Assigning current file name as stage and execution name</span>
    <span class="n">current_script</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">file_name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">current_script</span><span class="p">)</span>
    <span class="n">name_without_extension</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">file_name</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
    <span class="c1"># create context if not already created</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">child_context</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create_context</span><span class="p">(</span><span class="n">pipeline_stage</span><span class="o">=</span><span class="n">name_without_extension</span><span class="p">)</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">child_context</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Failed to create context for </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">pipeline_name</span><span class="si">}</span><span class="s2">!!&quot;</span>

    <span class="c1"># create execution if not already created</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">execution</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create_execution</span><span class="p">(</span><span class="n">execution_type</span><span class="o">=</span><span class="n">name_without_extension</span><span class="p">)</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">execution</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Failed to create execution for </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">pipeline_name</span><span class="si">}</span><span class="s2">!!&quot;</span>

    <span class="n">custom_props</span> <span class="o">=</span> <span class="p">{}</span> <span class="k">if</span> <span class="n">custom_properties</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">custom_properties</span>
    <span class="n">uri</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid1</span><span class="p">())</span>
    <span class="n">metrics_name</span> <span class="o">=</span> <span class="n">metrics_name</span> <span class="o">+</span> <span class="s2">&quot;:&quot;</span> <span class="o">+</span> <span class="n">uri</span> <span class="o">+</span> <span class="s2">&quot;:&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">execution</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
    <span class="n">metrics</span> <span class="o">=</span> <span class="n">create_new_artifact_event_and_attribution</span><span class="p">(</span>
        <span class="n">store</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="p">,</span>
        <span class="n">execution_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">execution</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
        <span class="n">context_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">child_context</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
        <span class="n">uri</span><span class="o">=</span><span class="n">uri</span><span class="p">,</span>
        <span class="n">name</span><span class="o">=</span><span class="n">metrics_name</span><span class="p">,</span>
        <span class="n">type_name</span><span class="o">=</span><span class="s2">&quot;Metrics&quot;</span><span class="p">,</span>
        <span class="n">event_type</span><span class="o">=</span><span class="n">mlpb</span><span class="o">.</span><span class="n">Event</span><span class="o">.</span><span class="n">Type</span><span class="o">.</span><span class="n">OUTPUT</span><span class="p">,</span>
        <span class="n">properties</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;metrics_name&quot;</span><span class="p">:</span> <span class="n">metrics_name</span><span class="p">},</span>
        <span class="n">artifact_type_properties</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;metrics_name&quot;</span><span class="p">:</span> <span class="n">mlpb</span><span class="o">.</span><span class="n">STRING</span><span class="p">},</span>
        <span class="n">custom_properties</span><span class="o">=</span><span class="n">custom_props</span><span class="p">,</span>
        <span class="n">milliseconds_since_epoch</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="p">:</span>
        <span class="c1"># To do create execution_links</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">create_metrics_node</span><span class="p">(</span>
            <span class="n">metrics_name</span><span class="p">,</span>
            <span class="n">uri</span><span class="p">,</span>
            <span class="s2">&quot;output&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">execution</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">parent_context</span><span class="p">,</span>
            <span class="n">custom_props</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">child_artifact</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;Name&quot;</span><span class="p">:</span> <span class="n">metrics_name</span><span class="p">,</span>
            <span class="s2">&quot;URI&quot;</span><span class="p">:</span> <span class="n">uri</span><span class="p">,</span>
            <span class="s2">&quot;Event&quot;</span><span class="p">:</span> <span class="s2">&quot;output&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Execution_Name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">execution_name</span><span class="p">,</span>
            <span class="s2">&quot;Type&quot;</span><span class="p">:</span> <span class="s2">&quot;Metrics&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Execution_Command&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">execution_command</span><span class="p">,</span>
            <span class="s2">&quot;Pipeline_Id&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent_context</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="s2">&quot;Pipeline_Name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent_context</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">create_artifact_relationships</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">input_artifacts</span><span class="p">,</span> <span class="n">child_artifact</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">execution_label_props</span>
        <span class="p">)</span>
    <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">logging_dir</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">metrics</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="cmflib.cmf.Cmf.log_metric" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">log_metric</span><span class="p">(</span><span class="n">metrics_name</span><span class="p">,</span> <span class="n">custom_properties</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#cmflib.cmf.Cmf.log_metric" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Stores the fine-grained (per step or per epoch) metrics to memory.
The metrics provided are stored in a parquet file. The <code>commit_metrics</code> call add the parquet file in the version
control framework. The metrics written in the parquet file can be retrieved using the <code>read_metrics</code> call.
Example:
    <div class="highlight"><pre><span></span><code><span class="c1"># Can be called at every epoch or every step in the training. This is logged to a parquet file and committed</span>
<span class="c1"># at the commit stage.</span>
<span class="c1"># Inside training loop</span>
<span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
     <span class="n">cmf</span><span class="o">.</span><span class="n">log_metric</span><span class="p">(</span><span class="s2">&quot;training_metrics&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;train_loss&quot;</span><span class="p">:</span> <span class="n">train_loss</span><span class="p">})</span>
<span class="n">cmf</span><span class="o">.</span><span class="n">commit_metrics</span><span class="p">(</span><span class="s2">&quot;training_metrics&quot;</span><span class="p">)</span>
</code></pre></div>
Args:
    metrics_name: Name to identify the metrics.
    custom_properties: Dictionary with metrics.</p>

            <details class="quote">
              <summary>Source code in <code>cmflib/cmf.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1479</span>
<span class="normal">1480</span>
<span class="normal">1481</span>
<span class="normal">1482</span>
<span class="normal">1483</span>
<span class="normal">1484</span>
<span class="normal">1485</span>
<span class="normal">1486</span>
<span class="normal">1487</span>
<span class="normal">1488</span>
<span class="normal">1489</span>
<span class="normal">1490</span>
<span class="normal">1491</span>
<span class="normal">1492</span>
<span class="normal">1493</span>
<span class="normal">1494</span>
<span class="normal">1495</span>
<span class="normal">1496</span>
<span class="normal">1497</span>
<span class="normal">1498</span>
<span class="normal">1499</span>
<span class="normal">1500</span>
<span class="normal">1501</span>
<span class="normal">1502</span>
<span class="normal">1503</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">log_metric</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">metrics_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">custom_properties</span><span class="p">:</span> <span class="n">t</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">t</span><span class="o">.</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Stores the fine-grained (per step or per epoch) metrics to memory.</span>
<span class="sd">    The metrics provided are stored in a parquet file. The `commit_metrics` call add the parquet file in the version</span>
<span class="sd">    control framework. The metrics written in the parquet file can be retrieved using the `read_metrics` call.</span>
<span class="sd">    Example:</span>
<span class="sd">        ```python</span>
<span class="sd">        # Can be called at every epoch or every step in the training. This is logged to a parquet file and committed</span>
<span class="sd">        # at the commit stage.</span>
<span class="sd">        # Inside training loop</span>
<span class="sd">        while True:</span>
<span class="sd">             cmf.log_metric(&quot;training_metrics&quot;, {&quot;train_loss&quot;: train_loss})</span>
<span class="sd">        cmf.commit_metrics(&quot;training_metrics&quot;)</span>
<span class="sd">        ```</span>
<span class="sd">    Args:</span>
<span class="sd">        metrics_name: Name to identify the metrics.</span>
<span class="sd">        custom_properties: Dictionary with metrics.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">metrics_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">metrics</span><span class="p">:</span>
        <span class="n">key</span> <span class="o">=</span> <span class="nb">max</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">metrics</span><span class="p">[</span><span class="n">metrics_name</span><span class="p">])</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">metrics</span><span class="p">[</span><span class="n">metrics_name</span><span class="p">][</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">custom_properties</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">metrics</span><span class="p">[</span><span class="n">metrics_name</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">metrics</span><span class="p">[</span><span class="n">metrics_name</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">custom_properties</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="cmflib.cmf.Cmf.commit_existing_metrics" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">commit_existing_metrics</span><span class="p">(</span><span class="n">metrics_name</span><span class="p">,</span> <span class="n">uri</span><span class="p">,</span> <span class="n">props</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">custom_properties</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#cmflib.cmf.Cmf.commit_existing_metrics" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Commits existing metrics associated with the given URI to MLMD.
Example:
<div class="highlight"><pre><span></span><code>   <span class="n">artifact</span><span class="p">:</span> <span class="n">mlpb</span><span class="o">.</span><span class="n">Artifact</span> <span class="o">=</span> <span class="n">cmf</span><span class="o">.</span><span class="n">commit_existing_metrics</span><span class="p">(</span><span class="s2">&quot;existing_metrics&quot;</span><span class="p">,</span> <span class="s2">&quot;abc123&quot;</span><span class="p">,</span>
   <span class="p">{</span><span class="s2">&quot;custom_key&quot;</span><span class="p">:</span> <span class="s2">&quot;custom_value&quot;</span><span class="p">})</span>
</code></pre></div>
Args:
   metrics_name: Name of the metrics.
   uri: Unique identifier associated with the metrics.
   custom_properties: Optional custom properties for the metrics.
Returns:
   Artifact object from the ML Protocol Buffers library associated with the existing metrics artifact.</p>

            <details class="quote">
              <summary>Source code in <code>cmflib/cmf.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1612</span>
<span class="normal">1613</span>
<span class="normal">1614</span>
<span class="normal">1615</span>
<span class="normal">1616</span>
<span class="normal">1617</span>
<span class="normal">1618</span>
<span class="normal">1619</span>
<span class="normal">1620</span>
<span class="normal">1621</span>
<span class="normal">1622</span>
<span class="normal">1623</span>
<span class="normal">1624</span>
<span class="normal">1625</span>
<span class="normal">1626</span>
<span class="normal">1627</span>
<span class="normal">1628</span>
<span class="normal">1629</span>
<span class="normal">1630</span>
<span class="normal">1631</span>
<span class="normal">1632</span>
<span class="normal">1633</span>
<span class="normal">1634</span>
<span class="normal">1635</span>
<span class="normal">1636</span>
<span class="normal">1637</span>
<span class="normal">1638</span>
<span class="normal">1639</span>
<span class="normal">1640</span>
<span class="normal">1641</span>
<span class="normal">1642</span>
<span class="normal">1643</span>
<span class="normal">1644</span>
<span class="normal">1645</span>
<span class="normal">1646</span>
<span class="normal">1647</span>
<span class="normal">1648</span>
<span class="normal">1649</span>
<span class="normal">1650</span>
<span class="normal">1651</span>
<span class="normal">1652</span>
<span class="normal">1653</span>
<span class="normal">1654</span>
<span class="normal">1655</span>
<span class="normal">1656</span>
<span class="normal">1657</span>
<span class="normal">1658</span>
<span class="normal">1659</span>
<span class="normal">1660</span>
<span class="normal">1661</span>
<span class="normal">1662</span>
<span class="normal">1663</span>
<span class="normal">1664</span>
<span class="normal">1665</span>
<span class="normal">1666</span>
<span class="normal">1667</span>
<span class="normal">1668</span>
<span class="normal">1669</span>
<span class="normal">1670</span>
<span class="normal">1671</span>
<span class="normal">1672</span>
<span class="normal">1673</span>
<span class="normal">1674</span>
<span class="normal">1675</span>
<span class="normal">1676</span>
<span class="normal">1677</span>
<span class="normal">1678</span>
<span class="normal">1679</span>
<span class="normal">1680</span>
<span class="normal">1681</span>
<span class="normal">1682</span>
<span class="normal">1683</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">commit_existing_metrics</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">metrics_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">uri</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">props</span><span class="p">:</span> <span class="n">t</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">t</span><span class="o">.</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">custom_properties</span><span class="p">:</span> <span class="n">t</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">t</span><span class="o">.</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Commits existing metrics associated with the given URI to MLMD.</span>
<span class="sd">    Example:</span>
<span class="sd">    ```python</span>
<span class="sd">       artifact: mlpb.Artifact = cmf.commit_existing_metrics(&quot;existing_metrics&quot;, &quot;abc123&quot;,</span>
<span class="sd">       {&quot;custom_key&quot;: &quot;custom_value&quot;})</span>
<span class="sd">    ```</span>
<span class="sd">    Args:</span>
<span class="sd">       metrics_name: Name of the metrics.</span>
<span class="sd">       uri: Unique identifier associated with the metrics.</span>
<span class="sd">       custom_properties: Optional custom properties for the metrics.</span>
<span class="sd">    Returns:</span>
<span class="sd">       Artifact object from the ML Protocol Buffers library associated with the existing metrics artifact.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">custom_props</span> <span class="o">=</span>  <span class="p">{}</span> <span class="k">if</span> <span class="n">custom_properties</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">custom_properties</span>
    <span class="n">c_hash</span> <span class="o">=</span> <span class="n">uri</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
    <span class="n">existing_artifact</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">existing_artifact</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="o">.</span><span class="n">get_artifacts_by_uri</span><span class="p">(</span><span class="n">c_hash</span><span class="p">))</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">existing_artifact</span>
        <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">existing_artifact</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span> <span class="p">):</span>
        <span class="n">metrics</span> <span class="o">=</span> <span class="n">link_execution_to_artifact</span><span class="p">(</span>
            <span class="n">store</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="p">,</span>
            <span class="n">execution_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">execution</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="n">uri</span><span class="o">=</span><span class="n">c_hash</span><span class="p">,</span>
            <span class="n">input_name</span><span class="o">=</span><span class="n">metrics_name</span><span class="p">,</span>
            <span class="n">event_type</span><span class="o">=</span><span class="n">mlpb</span><span class="o">.</span><span class="n">Event</span><span class="o">.</span><span class="n">Type</span><span class="o">.</span><span class="n">OUTPUT</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">metrics</span> <span class="o">=</span> <span class="n">create_new_artifact_event_and_attribution</span><span class="p">(</span>
            <span class="n">store</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="p">,</span>
            <span class="n">execution_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">execution</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="n">context_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">child_context</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="n">uri</span><span class="o">=</span><span class="n">uri</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="n">metrics_name</span><span class="p">,</span>
            <span class="n">type_name</span><span class="o">=</span><span class="s2">&quot;Step_Metrics&quot;</span><span class="p">,</span>
            <span class="n">event_type</span><span class="o">=</span><span class="n">mlpb</span><span class="o">.</span><span class="n">Event</span><span class="o">.</span><span class="n">Type</span><span class="o">.</span><span class="n">OUTPUT</span><span class="p">,</span>
            <span class="n">properties</span><span class="o">=</span><span class="p">{</span>
                <span class="c1"># passing uri value to commit</span>
                <span class="s2">&quot;Commit&quot;</span><span class="p">:</span> <span class="n">props</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;Commit&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
                <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="n">props</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;url&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
            <span class="p">},</span>
            <span class="n">artifact_type_properties</span><span class="o">=</span><span class="p">{</span>
                <span class="s2">&quot;Commit&quot;</span><span class="p">:</span> <span class="n">mlpb</span><span class="o">.</span><span class="n">STRING</span><span class="p">,</span>
                <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="n">mlpb</span><span class="o">.</span><span class="n">STRING</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="n">custom_properties</span><span class="o">=</span><span class="n">custom_props</span><span class="p">,</span>
            <span class="n">milliseconds_since_epoch</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">),</span>
        <span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">create_metrics_node</span><span class="p">(</span>
            <span class="n">metrics_name</span><span class="p">,</span>
            <span class="n">uri</span><span class="p">,</span>
            <span class="s2">&quot;output&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">execution</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">parent_context</span><span class="p">,</span>
            <span class="n">custom_props</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">child_artifact</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;Name&quot;</span><span class="p">:</span> <span class="n">metrics_name</span><span class="p">,</span>
            <span class="s2">&quot;URI&quot;</span><span class="p">:</span> <span class="n">uri</span><span class="p">,</span>
            <span class="s2">&quot;Event&quot;</span><span class="p">:</span> <span class="s2">&quot;output&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Execution_Name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">execution_name</span><span class="p">,</span>
            <span class="s2">&quot;Type&quot;</span><span class="p">:</span> <span class="s2">&quot;Metrics&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Execution_Command&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">execution_command</span><span class="p">,</span>
            <span class="s2">&quot;Pipeline_Id&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent_context</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">create_artifact_relationships</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">input_artifacts</span><span class="p">,</span> <span class="n">child_artifact</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">execution_label_props</span>
        <span class="p">)</span>
    <span class="k">return</span> <span class="n">metrics</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="cmflib.cmf.Cmf.create_dataslice" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">create_dataslice</span><span class="p">(</span><span class="n">name</span><span class="p">)</span></code>

<a href="#cmflib.cmf.Cmf.create_dataslice" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Creates a dataslice object.
Once created, users can add data instances to this data slice with <a class="autorefs autorefs-internal" href="../dataslice/#cmflib.cmf.Cmf.DataSlice.add_data">add_data</a>
method. Users are also responsible for committing data slices by calling the
<a class="autorefs autorefs-internal" href="../dataslice/#cmflib.cmf.Cmf.DataSlice.commit">commit</a> method.
Example:
    <div class="highlight"><pre><span></span><code><span class="n">dataslice</span> <span class="o">=</span> <span class="n">cmf</span><span class="o">.</span><span class="n">create_dataslice</span><span class="p">(</span><span class="s2">&quot;slice-a&quot;</span><span class="p">)</span>
</code></pre></div>
Args:
    name: Name to identify the dataslice.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="cmflib.cmf.Cmf.DataSlice">DataSlice</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Instance of a newly created [DataSlice][cmflib.cmf.Cmf.DataSlice].</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>cmflib/cmf.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1744</span>
<span class="normal">1745</span>
<span class="normal">1746</span>
<span class="normal">1747</span>
<span class="normal">1748</span>
<span class="normal">1749</span>
<span class="normal">1750</span>
<span class="normal">1751</span>
<span class="normal">1752</span>
<span class="normal">1753</span>
<span class="normal">1754</span>
<span class="normal">1755</span>
<span class="normal">1756</span>
<span class="normal">1757</span>
<span class="normal">1758</span>
<span class="normal">1759</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">create_dataslice</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Cmf.DataSlice&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Creates a dataslice object.</span>
<span class="sd">    Once created, users can add data instances to this data slice with [add_data][cmflib.cmf.Cmf.DataSlice.add_data]</span>
<span class="sd">    method. Users are also responsible for committing data slices by calling the</span>
<span class="sd">    [commit][cmflib.cmf.Cmf.DataSlice.commit] method.</span>
<span class="sd">    Example:</span>
<span class="sd">        ```python</span>
<span class="sd">        dataslice = cmf.create_dataslice(&quot;slice-a&quot;)</span>
<span class="sd">        ```</span>
<span class="sd">    Args:</span>
<span class="sd">        name: Name to identify the dataslice.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Instance of a newly created [DataSlice][cmflib.cmf.Cmf.DataSlice].</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">Cmf</span><span class="o">.</span><span class="n">DataSlice</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="cmflib.cmf.Cmf.update_dataslice" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">update_dataslice</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">record</span><span class="p">,</span> <span class="n">custom_properties</span><span class="p">)</span></code>

<a href="#cmflib.cmf.Cmf.update_dataslice" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Updates a dataslice record in a Parquet file with the provided custom properties.
Example:
<div class="highlight"><pre><span></span><code>   <span class="n">dataslice</span><span class="o">=</span><span class="n">cmf</span><span class="o">.</span><span class="n">update_dataslice</span><span class="p">(</span><span class="s2">&quot;dataslice_file.parquet&quot;</span><span class="p">,</span> <span class="s2">&quot;record_id&quot;</span><span class="p">,</span> 
   <span class="p">{</span><span class="s2">&quot;key1&quot;</span><span class="p">:</span> <span class="s2">&quot;updated_value&quot;</span><span class="p">})</span>
</code></pre></div>
Args:
   name: Name of the Parquet file.
   record: Identifier of the dataslice record to be updated.
   custom_properties: Dictionary containing custom properties to update.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>cmflib/cmf.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1771</span>
<span class="normal">1772</span>
<span class="normal">1773</span>
<span class="normal">1774</span>
<span class="normal">1775</span>
<span class="normal">1776</span>
<span class="normal">1777</span>
<span class="normal">1778</span>
<span class="normal">1779</span>
<span class="normal">1780</span>
<span class="normal">1781</span>
<span class="normal">1782</span>
<span class="normal">1783</span>
<span class="normal">1784</span>
<span class="normal">1785</span>
<span class="normal">1786</span>
<span class="normal">1787</span>
<span class="normal">1788</span>
<span class="normal">1789</span>
<span class="normal">1790</span>
<span class="normal">1791</span>
<span class="normal">1792</span>
<span class="normal">1793</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">update_dataslice</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">record</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">custom_properties</span><span class="p">:</span> <span class="n">t</span><span class="o">.</span><span class="n">Dict</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Updates a dataslice record in a Parquet file with the provided custom properties.</span>
<span class="sd">    Example:</span>
<span class="sd">    ```python</span>
<span class="sd">       dataslice=cmf.update_dataslice(&quot;dataslice_file.parquet&quot;, &quot;record_id&quot;, </span>
<span class="sd">       {&quot;key1&quot;: &quot;updated_value&quot;})</span>
<span class="sd">    ```</span>
<span class="sd">    Args:</span>
<span class="sd">       name: Name of the Parquet file.</span>
<span class="sd">       record: Identifier of the dataslice record to be updated.</span>
<span class="sd">       custom_properties: Dictionary containing custom properties to update.</span>

<span class="sd">    Returns:</span>
<span class="sd">       None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">directory_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ARTIFACTS_PATH</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">execution</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s2">&quot;Execution_uuid&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">string_value</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">DATASLICE_PATH</span><span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">directory_path</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_parquet</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
    <span class="n">temp_dict</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(</span><span class="s2">&quot;index&quot;</span><span class="p">)</span>
    <span class="n">temp_dict</span><span class="p">[</span><span class="n">record</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">custom_properties</span><span class="p">)</span>
    <span class="n">dataslice_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">temp_dict</span><span class="p">,</span> <span class="n">orient</span><span class="o">=</span><span class="s2">&quot;index&quot;</span><span class="p">)</span>
    <span class="n">dataslice_df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">names</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Path&quot;</span><span class="p">]</span>
    <span class="n">dataslice_df</span><span class="o">.</span><span class="n">to_parquet</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">




    <div class="doc doc-contents first">

        <p>This module contains all the public API for CMF</p>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h2 id="cmflib.cmf.cmf_init_show" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">cmf_init_show</span><span class="p">()</span></code>

<a href="#cmflib.cmf.cmf_init_show" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Initializes and shows details of the CMF command. 
Example: 
<div class="highlight"><pre><span></span><code>     <span class="n">result</span> <span class="o">=</span> <span class="n">cmf_init_show</span><span class="p">()</span> 
</code></pre></div>
Returns: 
   Output from the _cmf_cmd_init function.</p>

            <details class="quote">
              <summary>Source code in <code>cmflib/cmf.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">2108</span>
<span class="normal">2109</span>
<span class="normal">2110</span>
<span class="normal">2111</span>
<span class="normal">2112</span>
<span class="normal">2113</span>
<span class="normal">2114</span>
<span class="normal">2115</span>
<span class="normal">2116</span>
<span class="normal">2117</span>
<span class="normal">2118</span>
<span class="normal">2119</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">cmf_init_show</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; Initializes and shows details of the CMF command. </span>
<span class="sd">    Example: </span>
<span class="sd">    ```python </span>
<span class="sd">         result = cmf_init_show() </span>
<span class="sd">    ``` </span>
<span class="sd">    Returns: </span>
<span class="sd">       Output from the _cmf_cmd_init function. </span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">output</span><span class="o">=</span><span class="n">_cmf_cmd_init</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">output</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="cmflib.cmf.cmf_init" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">cmf_init</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">git_remote_url</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">cmf_server_url</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">neo4j_user</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">neo4j_password</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">neo4j_uri</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">url</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">endpoint_url</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">access_key_id</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">secret_key</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">session_token</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">user</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">osdf_path</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">key_id</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">key_path</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">key_issuer</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span></code>

<a href="#cmflib.cmf.cmf_init" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Initializes the CMF configuration based on the provided parameters. 
Example:
<div class="highlight"><pre><span></span><code>   <span class="n">cmf_init</span><span class="p">(</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;local&quot;</span><span class="p">,</span> 
             <span class="n">path</span><span class="o">=</span><span class="s2">&quot;/path/to/re&quot;</span><span class="p">,</span>
             <span class="n">git_remote_url</span><span class="o">=</span><span class="s2">&quot;git@github.com:user/repo.git&quot;</span><span class="p">,</span>
             <span class="n">cmf_server_url</span><span class="o">=</span><span class="s2">&quot;http://cmf-server&quot;</span>
             <span class="n">neo4j_user</span><span class="s2">&quot;, </span>
             <span class="n">neo4j_password</span><span class="o">=</span><span class="s2">&quot;password&quot;</span><span class="p">,</span>
             <span class="n">neo4j_uri</span><span class="o">=</span><span class="s2">&quot;bolt://localhost:76&quot;</span>
           <span class="p">)</span>
</code></pre></div>
Args: 
   type: Type of repository ("local", "minioS3", "amazonS3", "sshremote")
   path: Path for the local repository. 
   git_remote_url: Git remote URL for version control.
   cmf_server_url: CMF server URL.
   neo4j_user: Neo4j database username.
   neo4j_password: Neo4j database password.
   neo4j_uri: Neo4j database URI.
   url: URL for MinioS3 or AmazonS3.
   endpoint_url: Endpoint URL for MinioS3.
   access_key_id: Access key ID for MinioS3 or AmazonS3.
   secret_key: Secret key for MinioS3 or AmazonS3. 
   session_token: Session token for AmazonS3.
   user: SSH remote username.
   password: SSH remote password. 
   port: SSH remote port
Returns:
   Output based on the initialized repository type.</p>

            <details class="quote">
              <summary>Source code in <code>cmflib/cmf.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">2121</span>
<span class="normal">2122</span>
<span class="normal">2123</span>
<span class="normal">2124</span>
<span class="normal">2125</span>
<span class="normal">2126</span>
<span class="normal">2127</span>
<span class="normal">2128</span>
<span class="normal">2129</span>
<span class="normal">2130</span>
<span class="normal">2131</span>
<span class="normal">2132</span>
<span class="normal">2133</span>
<span class="normal">2134</span>
<span class="normal">2135</span>
<span class="normal">2136</span>
<span class="normal">2137</span>
<span class="normal">2138</span>
<span class="normal">2139</span>
<span class="normal">2140</span>
<span class="normal">2141</span>
<span class="normal">2142</span>
<span class="normal">2143</span>
<span class="normal">2144</span>
<span class="normal">2145</span>
<span class="normal">2146</span>
<span class="normal">2147</span>
<span class="normal">2148</span>
<span class="normal">2149</span>
<span class="normal">2150</span>
<span class="normal">2151</span>
<span class="normal">2152</span>
<span class="normal">2153</span>
<span class="normal">2154</span>
<span class="normal">2155</span>
<span class="normal">2156</span>
<span class="normal">2157</span>
<span class="normal">2158</span>
<span class="normal">2159</span>
<span class="normal">2160</span>
<span class="normal">2161</span>
<span class="normal">2162</span>
<span class="normal">2163</span>
<span class="normal">2164</span>
<span class="normal">2165</span>
<span class="normal">2166</span>
<span class="normal">2167</span>
<span class="normal">2168</span>
<span class="normal">2169</span>
<span class="normal">2170</span>
<span class="normal">2171</span>
<span class="normal">2172</span>
<span class="normal">2173</span>
<span class="normal">2174</span>
<span class="normal">2175</span>
<span class="normal">2176</span>
<span class="normal">2177</span>
<span class="normal">2178</span>
<span class="normal">2179</span>
<span class="normal">2180</span>
<span class="normal">2181</span>
<span class="normal">2182</span>
<span class="normal">2183</span>
<span class="normal">2184</span>
<span class="normal">2185</span>
<span class="normal">2186</span>
<span class="normal">2187</span>
<span class="normal">2188</span>
<span class="normal">2189</span>
<span class="normal">2190</span>
<span class="normal">2191</span>
<span class="normal">2192</span>
<span class="normal">2193</span>
<span class="normal">2194</span>
<span class="normal">2195</span>
<span class="normal">2196</span>
<span class="normal">2197</span>
<span class="normal">2198</span>
<span class="normal">2199</span>
<span class="normal">2200</span>
<span class="normal">2201</span>
<span class="normal">2202</span>
<span class="normal">2203</span>
<span class="normal">2204</span>
<span class="normal">2205</span>
<span class="normal">2206</span>
<span class="normal">2207</span>
<span class="normal">2208</span>
<span class="normal">2209</span>
<span class="normal">2210</span>
<span class="normal">2211</span>
<span class="normal">2212</span>
<span class="normal">2213</span>
<span class="normal">2214</span>
<span class="normal">2215</span>
<span class="normal">2216</span>
<span class="normal">2217</span>
<span class="normal">2218</span>
<span class="normal">2219</span>
<span class="normal">2220</span>
<span class="normal">2221</span>
<span class="normal">2222</span>
<span class="normal">2223</span>
<span class="normal">2224</span>
<span class="normal">2225</span>
<span class="normal">2226</span>
<span class="normal">2227</span>
<span class="normal">2228</span>
<span class="normal">2229</span>
<span class="normal">2230</span>
<span class="normal">2231</span>
<span class="normal">2232</span>
<span class="normal">2233</span>
<span class="normal">2234</span>
<span class="normal">2235</span>
<span class="normal">2236</span>
<span class="normal">2237</span>
<span class="normal">2238</span>
<span class="normal">2239</span>
<span class="normal">2240</span>
<span class="normal">2241</span>
<span class="normal">2242</span>
<span class="normal">2243</span>
<span class="normal">2244</span>
<span class="normal">2245</span>
<span class="normal">2246</span>
<span class="normal">2247</span>
<span class="normal">2248</span>
<span class="normal">2249</span>
<span class="normal">2250</span>
<span class="normal">2251</span>
<span class="normal">2252</span>
<span class="normal">2253</span>
<span class="normal">2254</span>
<span class="normal">2255</span>
<span class="normal">2256</span>
<span class="normal">2257</span>
<span class="normal">2258</span>
<span class="normal">2259</span>
<span class="normal">2260</span>
<span class="normal">2261</span>
<span class="normal">2262</span>
<span class="normal">2263</span>
<span class="normal">2264</span>
<span class="normal">2265</span>
<span class="normal">2266</span>
<span class="normal">2267</span>
<span class="normal">2268</span>
<span class="normal">2269</span>
<span class="normal">2270</span>
<span class="normal">2271</span>
<span class="normal">2272</span>
<span class="normal">2273</span>
<span class="normal">2274</span>
<span class="normal">2275</span>
<span class="normal">2276</span>
<span class="normal">2277</span>
<span class="normal">2278</span>
<span class="normal">2279</span>
<span class="normal">2280</span>
<span class="normal">2281</span>
<span class="normal">2282</span>
<span class="normal">2283</span>
<span class="normal">2284</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">cmf_init</span><span class="p">(</span><span class="nb">type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="n">path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="n">git_remote_url</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="n">cmf_server_url</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="n">neo4j_user</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="n">neo4j_password</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="n">neo4j_uri</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="n">url</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="n">endpoint_url</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="n">access_key_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="n">secret_key</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="n">session_token</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="n">user</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="n">password</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="n">port</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">osdf_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="n">key_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="n">key_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="n">key_issuer</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
         <span class="p">):</span>

<span class="w">    </span><span class="sd">&quot;&quot;&quot; Initializes the CMF configuration based on the provided parameters. </span>
<span class="sd">    Example:</span>
<span class="sd">    ```python</span>
<span class="sd">       cmf_init( type=&quot;local&quot;, </span>
<span class="sd">                 path=&quot;/path/to/re&quot;,</span>
<span class="sd">                 git_remote_url=&quot;git@github.com:user/repo.git&quot;,</span>
<span class="sd">                 cmf_server_url=&quot;http://cmf-server&quot;</span>
<span class="sd">                 neo4j_user&quot;, </span>
<span class="sd">                 neo4j_password=&quot;password&quot;,</span>
<span class="sd">                 neo4j_uri=&quot;bolt://localhost:76&quot;</span>
<span class="sd">               )</span>
<span class="sd">    ```</span>
<span class="sd">    Args: </span>
<span class="sd">       type: Type of repository (&quot;local&quot;, &quot;minioS3&quot;, &quot;amazonS3&quot;, &quot;sshremote&quot;)</span>
<span class="sd">       path: Path for the local repository. </span>
<span class="sd">       git_remote_url: Git remote URL for version control.</span>
<span class="sd">       cmf_server_url: CMF server URL.</span>
<span class="sd">       neo4j_user: Neo4j database username.</span>
<span class="sd">       neo4j_password: Neo4j database password.</span>
<span class="sd">       neo4j_uri: Neo4j database URI.</span>
<span class="sd">       url: URL for MinioS3 or AmazonS3.</span>
<span class="sd">       endpoint_url: Endpoint URL for MinioS3.</span>
<span class="sd">       access_key_id: Access key ID for MinioS3 or AmazonS3.</span>
<span class="sd">       secret_key: Secret key for MinioS3 or AmazonS3. </span>
<span class="sd">       session_token: Session token for AmazonS3.</span>
<span class="sd">       user: SSH remote username.</span>
<span class="sd">       password: SSH remote password. </span>
<span class="sd">       port: SSH remote port</span>
<span class="sd">    Returns:</span>
<span class="sd">       Output based on the initialized repository type.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="nb">type</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Error: Type is not provided&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;local&quot;</span><span class="p">,</span><span class="s2">&quot;minioS3&quot;</span><span class="p">,</span><span class="s2">&quot;amazonS3&quot;</span><span class="p">,</span><span class="s2">&quot;sshremote&quot;</span><span class="p">,</span><span class="s2">&quot;osdfremote&quot;</span><span class="p">]:</span>
        <span class="k">return</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Error: Type value is undefined&quot;</span><span class="o">+</span> <span class="s2">&quot; &quot;</span><span class="o">+</span><span class="nb">type</span><span class="o">+</span><span class="s2">&quot;.Expected: &quot;</span><span class="o">+</span><span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s2">&quot;local&quot;</span><span class="p">,</span><span class="s2">&quot;minioS3&quot;</span><span class="p">,</span><span class="s2">&quot;amazonS3&quot;</span><span class="p">,</span><span class="s2">&quot;sshremote&quot;</span><span class="p">,</span><span class="s2">&quot;osdfremote&quot;</span><span class="p">]))</span>

    <span class="k">if</span> <span class="n">neo4j_user</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span> <span class="ow">and</span>  <span class="n">neo4j_password</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span> <span class="ow">and</span> <span class="n">neo4j_uri</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
        <span class="k">pass</span>
    <span class="k">elif</span> <span class="n">neo4j_user</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span> <span class="ow">and</span>  <span class="n">neo4j_password</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span> <span class="ow">and</span> <span class="n">neo4j_uri</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
        <span class="k">pass</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Error: Enter all neo4j parameters.&quot;</span><span class="p">)</span> 

    <span class="n">args</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;path&#39;</span><span class="p">:</span> <span class="n">path</span><span class="p">,</span>
        <span class="s1">&#39;git_remote_url&#39;</span><span class="p">:</span> <span class="n">git_remote_url</span><span class="p">,</span>
        <span class="s1">&#39;url&#39;</span><span class="p">:</span> <span class="n">url</span><span class="p">,</span>
        <span class="s1">&#39;endpoint_url&#39;</span><span class="p">:</span> <span class="n">endpoint_url</span><span class="p">,</span>
        <span class="s1">&#39;access_key_id&#39;</span><span class="p">:</span> <span class="n">access_key_id</span><span class="p">,</span>
        <span class="s1">&#39;secret_key&#39;</span><span class="p">:</span> <span class="n">secret_key</span><span class="p">,</span>
        <span class="s1">&#39;session_token&#39;</span><span class="p">:</span> <span class="n">session_token</span><span class="p">,</span>
        <span class="s1">&#39;user&#39;</span><span class="p">:</span> <span class="n">user</span><span class="p">,</span>
        <span class="s1">&#39;password&#39;</span><span class="p">:</span> <span class="n">password</span><span class="p">,</span>
        <span class="s1">&#39;osdf_path&#39;</span><span class="p">:</span> <span class="n">osdf_path</span><span class="p">,</span>
        <span class="s1">&#39;key_id&#39;</span><span class="p">:</span> <span class="n">key_id</span><span class="p">,</span>
        <span class="s1">&#39;key_path&#39;</span><span class="p">:</span> <span class="n">key_path</span><span class="p">,</span> 
        <span class="s1">&#39;key-issuer&#39;</span><span class="p">:</span> <span class="n">key_issuer</span><span class="p">,</span>
        <span class="p">}</span>

    <span class="n">status_args</span><span class="o">=</span><span class="n">non_related_args</span><span class="p">(</span><span class="nb">type</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">type</span> <span class="o">==</span> <span class="s2">&quot;local&quot;</span> <span class="ow">and</span> <span class="n">path</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span> <span class="ow">and</span>  <span class="n">git_remote_url</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span> <span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize local repository&quot;&quot;&quot;</span>
        <span class="n">output</span> <span class="o">=</span> <span class="n">_init_local</span><span class="p">(</span>
            <span class="n">path</span><span class="p">,</span> <span class="n">git_remote_url</span><span class="p">,</span> <span class="n">cmf_server_url</span><span class="p">,</span> <span class="n">neo4j_user</span><span class="p">,</span> <span class="n">neo4j_password</span><span class="p">,</span> <span class="n">neo4j_uri</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">status_args</span> <span class="o">!=</span> <span class="p">[]:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;There are non-related arguments: &quot;</span><span class="o">+</span><span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">status_args</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;.Please remove them.&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">output</span>

    <span class="k">elif</span> <span class="nb">type</span> <span class="o">==</span> <span class="s2">&quot;minioS3&quot;</span> <span class="ow">and</span> <span class="n">url</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span> <span class="ow">and</span> <span class="n">endpoint_url</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span> <span class="ow">and</span> <span class="n">access_key_id</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span> <span class="ow">and</span> <span class="n">secret_key</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span> <span class="ow">and</span> <span class="n">git_remote_url</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize minioS3 repository&quot;&quot;&quot;</span>
        <span class="n">output</span> <span class="o">=</span> <span class="n">_init_minioS3</span><span class="p">(</span>
            <span class="n">url</span><span class="p">,</span>
            <span class="n">endpoint_url</span><span class="p">,</span>
            <span class="n">access_key_id</span><span class="p">,</span>
            <span class="n">secret_key</span><span class="p">,</span>
            <span class="n">git_remote_url</span><span class="p">,</span>
            <span class="n">cmf_server_url</span><span class="p">,</span>
            <span class="n">neo4j_user</span><span class="p">,</span>
            <span class="n">neo4j_password</span><span class="p">,</span>
            <span class="n">neo4j_uri</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">status_args</span> <span class="o">!=</span> <span class="p">[]:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;There are non-related arguments: &quot;</span><span class="o">+</span><span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">status_args</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;.Please remove them.&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">output</span>

    <span class="k">elif</span> <span class="nb">type</span> <span class="o">==</span> <span class="s2">&quot;amazonS3&quot;</span> <span class="ow">and</span> <span class="n">url</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span> <span class="ow">and</span> <span class="n">access_key_id</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span> <span class="ow">and</span> <span class="n">secret_key</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span> <span class="ow">and</span> <span class="n">git_remote_url</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize amazonS3 repository&quot;&quot;&quot;</span>
        <span class="n">output</span> <span class="o">=</span> <span class="n">_init_amazonS3</span><span class="p">(</span>
            <span class="n">url</span><span class="p">,</span>
            <span class="n">access_key_id</span><span class="p">,</span>
            <span class="n">secret_key</span><span class="p">,</span>
            <span class="n">session_token</span><span class="p">,</span>
            <span class="n">git_remote_url</span><span class="p">,</span>
            <span class="n">cmf_server_url</span><span class="p">,</span>
            <span class="n">neo4j_user</span><span class="p">,</span>
            <span class="n">neo4j_password</span><span class="p">,</span>
            <span class="n">neo4j_uri</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">status_args</span> <span class="o">!=</span> <span class="p">[]:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;There are non-related arguments: &quot;</span><span class="o">+</span><span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">status_args</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;.Please remove them.&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">output</span>

    <span class="k">elif</span> <span class="nb">type</span> <span class="o">==</span> <span class="s2">&quot;sshremote&quot;</span> <span class="ow">and</span> <span class="n">path</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span> <span class="ow">and</span> <span class="n">user</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span> <span class="ow">and</span> <span class="n">port</span> <span class="o">!=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">password</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span> <span class="ow">and</span> <span class="n">git_remote_url</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize sshremote repository&quot;&quot;&quot;</span>
        <span class="n">output</span> <span class="o">=</span> <span class="n">_init_sshremote</span><span class="p">(</span>
            <span class="n">path</span><span class="p">,</span>
            <span class="n">user</span><span class="p">,</span>
            <span class="n">port</span><span class="p">,</span>
            <span class="n">password</span><span class="p">,</span>
            <span class="n">git_remote_url</span><span class="p">,</span>
            <span class="n">cmf_server_url</span><span class="p">,</span>
            <span class="n">neo4j_user</span><span class="p">,</span>
            <span class="n">neo4j_password</span><span class="p">,</span>
            <span class="n">neo4j_uri</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">status_args</span> <span class="o">!=</span> <span class="p">[]:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;There are non-related arguments: &quot;</span><span class="o">+</span><span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">status_args</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;.Please remove them.&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">output</span>

    <span class="k">elif</span> <span class="nb">type</span> <span class="o">==</span> <span class="s2">&quot;osdfremote&quot;</span> <span class="ow">and</span> <span class="n">osdf_path</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span> <span class="ow">and</span> <span class="n">key_id</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span> <span class="ow">and</span> <span class="n">key_path</span> <span class="o">!=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">key_issuer</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span> <span class="ow">and</span> <span class="n">git_remote_url</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize osdfremote repository&quot;&quot;&quot;</span>
        <span class="n">output</span> <span class="o">=</span> <span class="n">_init_osdfremote</span><span class="p">(</span>
            <span class="n">osdf_path</span><span class="p">,</span>
            <span class="n">key_id</span><span class="p">,</span>
            <span class="n">key_path</span><span class="p">,</span>
            <span class="n">key_issuer</span><span class="p">,</span>
            <span class="n">git_remote_url</span><span class="p">,</span>
            <span class="n">cmf_server_url</span><span class="p">,</span>
            <span class="n">neo4j_user</span><span class="p">,</span>
            <span class="n">neo4j_password</span><span class="p">,</span>
            <span class="n">neo4j_uri</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">status_args</span> <span class="o">!=</span> <span class="p">[]:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;There are non-related arguments: &quot;</span><span class="o">+</span><span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">status_args</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;.Please remove them.&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">output</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Error: Enter all arguments&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="cmflib.cmf.metadata_push" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">metadata_push</span><span class="p">(</span><span class="n">pipeline_name</span><span class="p">,</span> <span class="n">filepath</span><span class="o">=</span><span class="s1">&#39;./mlmd&#39;</span><span class="p">,</span> <span class="n">tensorboard_path</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">execution_id</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span></code>

<a href="#cmflib.cmf.metadata_push" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Pushes MLMD file to CMF-server.
Example:
<div class="highlight"><pre><span></span><code>     <span class="n">result</span> <span class="o">=</span> <span class="n">metadata_push</span><span class="p">(</span><span class="s2">&quot;example_pipeline&quot;</span><span class="p">,</span> <span class="s2">&quot;mlmd_file&quot;</span><span class="p">,</span> <span class="s2">&quot;3&quot;</span><span class="p">)</span>
</code></pre></div>
Args:
    pipeline_name: Name of the pipeline.
    filepath: Path to the MLMD file.
    execution_id: Optional execution ID.
    tensorboard_path: Path to tensorboard logs.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Response output from the _metadata_push function.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>cmflib/cmf.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1996</span>
<span class="normal">1997</span>
<span class="normal">1998</span>
<span class="normal">1999</span>
<span class="normal">2000</span>
<span class="normal">2001</span>
<span class="normal">2002</span>
<span class="normal">2003</span>
<span class="normal">2004</span>
<span class="normal">2005</span>
<span class="normal">2006</span>
<span class="normal">2007</span>
<span class="normal">2008</span>
<span class="normal">2009</span>
<span class="normal">2010</span>
<span class="normal">2011</span>
<span class="normal">2012</span>
<span class="normal">2013</span>
<span class="normal">2014</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">metadata_push</span><span class="p">(</span><span class="n">pipeline_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">filepath</span> <span class="o">=</span> <span class="s2">&quot;./mlmd&quot;</span><span class="p">,</span> <span class="n">tensorboard_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">execution_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; Pushes MLMD file to CMF-server.</span>
<span class="sd">    Example:</span>
<span class="sd">    ```python</span>
<span class="sd">         result = metadata_push(&quot;example_pipeline&quot;, &quot;mlmd_file&quot;, &quot;3&quot;)</span>
<span class="sd">    ```</span>
<span class="sd">    Args:</span>
<span class="sd">        pipeline_name: Name of the pipeline.</span>
<span class="sd">        filepath: Path to the MLMD file.</span>
<span class="sd">        execution_id: Optional execution ID.</span>
<span class="sd">        tensorboard_path: Path to tensorboard logs.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Response output from the _metadata_push function.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Required arguments:  pipeline_name</span>
    <span class="c1"># Optional arguments: Execution_ID, filepath (mlmd file path, tensorboard_path</span>
    <span class="n">output</span> <span class="o">=</span> <span class="n">_metadata_push</span><span class="p">(</span><span class="n">pipeline_name</span><span class="p">,</span> <span class="n">filepath</span><span class="p">,</span> <span class="n">execution_id</span><span class="p">,</span> <span class="n">tensorboard_path</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">output</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="cmflib.cmf.metadata_pull" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">metadata_pull</span><span class="p">(</span><span class="n">pipeline_name</span><span class="p">,</span> <span class="n">filepath</span><span class="o">=</span><span class="s1">&#39;./mlmd&#39;</span><span class="p">,</span> <span class="n">execution_id</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span></code>

<a href="#cmflib.cmf.metadata_pull" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Pulls MLMD file from CMF-server. 
Example: 
<div class="highlight"><pre><span></span><code>     <span class="n">result</span> <span class="o">=</span> <span class="n">metadata_pull</span><span class="p">(</span><span class="s2">&quot;example_pipeline&quot;</span><span class="p">,</span> <span class="s2">&quot;./mlmd_directory&quot;</span><span class="p">,</span> <span class="s2">&quot;execution_123&quot;</span><span class="p">)</span> 
</code></pre></div>
Args: 
   pipeline_name: Name of the pipeline. 
   filepath: File path to store the MLMD file. 
   execution_id: Optional execution ID. 
Returns: 
   Message from the _metadata_pull function.</p>

            <details class="quote">
              <summary>Source code in <code>cmflib/cmf.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">2016</span>
<span class="normal">2017</span>
<span class="normal">2018</span>
<span class="normal">2019</span>
<span class="normal">2020</span>
<span class="normal">2021</span>
<span class="normal">2022</span>
<span class="normal">2023</span>
<span class="normal">2024</span>
<span class="normal">2025</span>
<span class="normal">2026</span>
<span class="normal">2027</span>
<span class="normal">2028</span>
<span class="normal">2029</span>
<span class="normal">2030</span>
<span class="normal">2031</span>
<span class="normal">2032</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">metadata_pull</span><span class="p">(</span><span class="n">pipeline_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">filepath</span> <span class="o">=</span> <span class="s2">&quot;./mlmd&quot;</span><span class="p">,</span> <span class="n">execution_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; Pulls MLMD file from CMF-server. </span>
<span class="sd">     Example: </span>
<span class="sd">     ```python </span>
<span class="sd">          result = metadata_pull(&quot;example_pipeline&quot;, &quot;./mlmd_directory&quot;, &quot;execution_123&quot;) </span>
<span class="sd">     ``` </span>
<span class="sd">     Args: </span>
<span class="sd">        pipeline_name: Name of the pipeline. </span>
<span class="sd">        filepath: File path to store the MLMD file. </span>
<span class="sd">        execution_id: Optional execution ID. </span>
<span class="sd">     Returns: </span>
<span class="sd">        Message from the _metadata_pull function. </span>
<span class="sd">     &quot;&quot;&quot;</span>
    <span class="c1"># Required arguments:  pipeline_name </span>
    <span class="c1">#Optional arguments: Execution_ID, filepath(file path to store mlmd file) </span>
    <span class="n">output</span> <span class="o">=</span> <span class="n">_metadata_pull</span><span class="p">(</span><span class="n">pipeline_name</span><span class="p">,</span> <span class="n">filepath</span><span class="p">,</span> <span class="n">execution_id</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">output</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="cmflib.cmf.artifact_pull" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">artifact_pull</span><span class="p">(</span><span class="n">pipeline_name</span><span class="p">,</span> <span class="n">filepath</span><span class="o">=</span><span class="s1">&#39;./mlmd&#39;</span><span class="p">)</span></code>

<a href="#cmflib.cmf.artifact_pull" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Pulls artifacts from the initialized repository.</p>
<p>Example:
<div class="highlight"><pre><span></span><code>     <span class="n">result</span> <span class="o">=</span> <span class="n">artifact_pull</span><span class="p">(</span><span class="s2">&quot;example_pipeline&quot;</span><span class="p">,</span> <span class="s2">&quot;./mlmd_directory&quot;</span><span class="p">)</span>
</code></pre></div></p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>pipeline_name</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name of the pipeline.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>filepath</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Path to store artifacts.</p>
              </div>
            </td>
            <td>
                  <code>&#39;./mlmd&#39;</code>
            </td>
          </tr>
      </tbody>
    </table>
        <p>Returns:
    Output from the _artifact_pull function.</p>

            <details class="quote">
              <summary>Source code in <code>cmflib/cmf.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">2052</span>
<span class="normal">2053</span>
<span class="normal">2054</span>
<span class="normal">2055</span>
<span class="normal">2056</span>
<span class="normal">2057</span>
<span class="normal">2058</span>
<span class="normal">2059</span>
<span class="normal">2060</span>
<span class="normal">2061</span>
<span class="normal">2062</span>
<span class="normal">2063</span>
<span class="normal">2064</span>
<span class="normal">2065</span>
<span class="normal">2066</span>
<span class="normal">2067</span>
<span class="normal">2068</span>
<span class="normal">2069</span>
<span class="normal">2070</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">artifact_pull</span><span class="p">(</span><span class="n">pipeline_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">filepath</span> <span class="o">=</span> <span class="s2">&quot;./mlmd&quot;</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; Pulls artifacts from the initialized repository.</span>

<span class="sd">    Example:</span>
<span class="sd">    ```python</span>
<span class="sd">         result = artifact_pull(&quot;example_pipeline&quot;, &quot;./mlmd_directory&quot;)</span>
<span class="sd">    ```</span>

<span class="sd">    Args:</span>
<span class="sd">        pipeline_name: Name of the pipeline.</span>
<span class="sd">        filepath: Path to store artifacts.</span>
<span class="sd">    Returns:</span>
<span class="sd">        Output from the _artifact_pull function.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Required arguments: Pipeline_name</span>
    <span class="c1"># Optional arguments: filepath( path to store artifacts)</span>
    <span class="n">output</span> <span class="o">=</span> <span class="n">_artifact_pull</span><span class="p">(</span><span class="n">pipeline_name</span><span class="p">,</span> <span class="n">filepath</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">output</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="cmflib.cmf.artifact_pull_single" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">artifact_pull_single</span><span class="p">(</span><span class="n">pipeline_name</span><span class="p">,</span> <span class="n">filepath</span><span class="p">,</span> <span class="n">artifact_name</span><span class="p">)</span></code>

<a href="#cmflib.cmf.artifact_pull_single" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Pulls a single artifact from the initialized repository. 
Example: 
<div class="highlight"><pre><span></span><code>    <span class="n">result</span> <span class="o">=</span> <span class="n">artifact_pull_single</span><span class="p">(</span><span class="s2">&quot;example_pipeline&quot;</span><span class="p">,</span> <span class="s2">&quot;./mlmd_directory&quot;</span><span class="p">,</span> <span class="s2">&quot;example_artifact&quot;</span><span class="p">)</span> 
</code></pre></div>
Args: 
   pipeline_name: Name of the pipeline. 
   filepath: Path to store the artifact. 
   artifact_name: Name of the artifact. 
Returns:
   Output from the _artifact_pull_single function.</p>

            <details class="quote">
              <summary>Source code in <code>cmflib/cmf.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">2072</span>
<span class="normal">2073</span>
<span class="normal">2074</span>
<span class="normal">2075</span>
<span class="normal">2076</span>
<span class="normal">2077</span>
<span class="normal">2078</span>
<span class="normal">2079</span>
<span class="normal">2080</span>
<span class="normal">2081</span>
<span class="normal">2082</span>
<span class="normal">2083</span>
<span class="normal">2084</span>
<span class="normal">2085</span>
<span class="normal">2086</span>
<span class="normal">2087</span>
<span class="normal">2088</span>
<span class="normal">2089</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">artifact_pull_single</span><span class="p">(</span><span class="n">pipeline_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">filepath</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">artifact_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; Pulls a single artifact from the initialized repository. </span>
<span class="sd">    Example: </span>
<span class="sd">    ```python </span>
<span class="sd">        result = artifact_pull_single(&quot;example_pipeline&quot;, &quot;./mlmd_directory&quot;, &quot;example_artifact&quot;) </span>
<span class="sd">    ```</span>
<span class="sd">    Args: </span>
<span class="sd">       pipeline_name: Name of the pipeline. </span>
<span class="sd">       filepath: Path to store the artifact. </span>
<span class="sd">       artifact_name: Name of the artifact. </span>
<span class="sd">    Returns:</span>
<span class="sd">       Output from the _artifact_pull_single function. </span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Required arguments: Pipeline_name</span>
    <span class="c1"># Optional arguments: filepath( path to store artifacts), artifact_name</span>
    <span class="n">output</span> <span class="o">=</span> <span class="n">_artifact_pull_single</span><span class="p">(</span><span class="n">pipeline_name</span><span class="p">,</span> <span class="n">filepath</span><span class="p">,</span> <span class="n">artifact_name</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">output</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="cmflib.cmf.artifact_push" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">artifact_push</span><span class="p">(</span><span class="n">pipeline_name</span><span class="p">,</span> <span class="n">filepath</span><span class="o">=</span><span class="s1">&#39;./mlmd&#39;</span><span class="p">)</span></code>

<a href="#cmflib.cmf.artifact_push" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Pushes artifacts to the initialized repository.</p>
<p>Example:
<div class="highlight"><pre><span></span><code>     <span class="n">result</span> <span class="o">=</span> <span class="n">artifact_push</span><span class="p">(</span><span class="s2">&quot;example_pipeline&quot;</span><span class="p">,</span> <span class="s2">&quot;./mlmd_directory&quot;</span><span class="p">)</span>
</code></pre></div>
Args: 
   pipeline_name: Name of the pipeline. 
   filepath: Path to store the artifact. 
Returns:
    Output from the _artifact_push function.</p>

            <details class="quote">
              <summary>Source code in <code>cmflib/cmf.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">2091</span>
<span class="normal">2092</span>
<span class="normal">2093</span>
<span class="normal">2094</span>
<span class="normal">2095</span>
<span class="normal">2096</span>
<span class="normal">2097</span>
<span class="normal">2098</span>
<span class="normal">2099</span>
<span class="normal">2100</span>
<span class="normal">2101</span>
<span class="normal">2102</span>
<span class="normal">2103</span>
<span class="normal">2104</span>
<span class="normal">2105</span>
<span class="normal">2106</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">artifact_push</span><span class="p">(</span><span class="n">pipeline_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">filepath</span> <span class="o">=</span> <span class="s2">&quot;./mlmd&quot;</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; Pushes artifacts to the initialized repository.</span>

<span class="sd">    Example:</span>
<span class="sd">    ```python</span>
<span class="sd">         result = artifact_push(&quot;example_pipeline&quot;, &quot;./mlmd_directory&quot;)</span>
<span class="sd">    ```</span>
<span class="sd">    Args: </span>
<span class="sd">       pipeline_name: Name of the pipeline. </span>
<span class="sd">       filepath: Path to store the artifact. </span>
<span class="sd">    Returns:</span>
<span class="sd">        Output from the _artifact_push function.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">output</span> <span class="o">=</span> <span class="n">_artifact_push</span><span class="p">(</span><span class="n">pipeline_name</span><span class="p">,</span> <span class="n">filepath</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">output</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/HewlettPackard/cmf" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://commonmetadata.slack.com/" target="_blank" rel="noopener" title="commonmetadata.slack.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M94.12 315.1c0 25.9-21.16 47.06-47.06 47.06S0 341 0 315.1s21.16-47.06 47.06-47.06h47.06zm23.72 0c0-25.9 21.16-47.06 47.06-47.06s47.06 21.16 47.06 47.06v117.84c0 25.9-21.16 47.06-47.06 47.06s-47.06-21.16-47.06-47.06zm47.06-188.98c-25.9 0-47.06-21.16-47.06-47.06S139 32 164.9 32s47.06 21.16 47.06 47.06v47.06zm0 23.72c25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06H47.06C21.16 243.96 0 222.8 0 196.9s21.16-47.06 47.06-47.06zm188.98 47.06c0-25.9 21.16-47.06 47.06-47.06S448 171 448 196.9s-21.16 47.06-47.06 47.06h-47.06zm-23.72 0c0 25.9-21.16 47.06-47.06 47.06s-47.06-21.16-47.06-47.06V79.06c0-25.9 21.16-47.06 47.06-47.06s47.06 21.16 47.06 47.06zM283.1 385.88c25.9 0 47.06 21.16 47.06 47.06S309 480 283.1 480s-47.06-21.16-47.06-47.06v-47.06zm0-23.72c-25.9 0-47.06-21.16-47.06-47.06s21.16-47.06 47.06-47.06h117.84c25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": [], "search": "../../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.525ec568.min.js"></script>
      
    
  </body>
</html>